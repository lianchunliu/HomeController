###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.3.10338/W32 for 8051         15/Oct/2017  22:31:30 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  C:\HomeController\Projects\zstack\Samples\GenericA #
#                          pp\Source\GenericApp.c                             #
#    Command line       =  -f C:\HomeController\Projects\zstack\Samples\Gener #
#                          icApp\CC2530DB\..\..\..\Tools\CC2530DB\f8wEndev.cf #
#                          g (-DCPU32MHZ -DROOT=__near_func -DBLINK_LEDS) -f  #
#                          C:\HomeController\Projects\zstack\Samples\GenericA #
#                          pp\CC2530DB\..\..\..\Tools\CC2530DB\f8wConfig.cfg  #
#                          (-DSECURE=0 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR      #
#                          -DDEFAULT_CHANLIST=0x00004000                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116 "-DCONST=const __code"    #
#                          -DGENERIC=__generic -DRFD_RCVC_ALWAYS_ON=FALSE     #
#                          -DPOLL_RATE=1000 -DQUEUED_POLL_RATE=100            #
#                          -DRESPONSE_POLL_RATE=100) -DREJOIN_POLL_RATE=440   #
#                          C:\HomeController\Projects\zstack\Samples\GenericA #
#                          pp\Source\GenericApp.c -D ZIGBEEPRO -D             #
#                          NWK_AUTO_POLL -D ZTOOL_P1 -D MT_TASK -D            #
#                          MT_SYS_FUNC -D MT_ZDO_FUNC -D LCD_SUPPORTED=DEBUG  #
#                          -D xPOWER_SAVING -lC C:\HomeController\Projects\zs #
#                          tack\Samples\GenericApp\CC2530DB\EndDeviceEB-Pro\L #
#                          ist\ -lA C:\HomeController\Projects\zstack\Samples #
#                          \GenericApp\CC2530DB\EndDeviceEB-Pro\List\         #
#                          --diag_suppress Pe001,Pa010 -o                     #
#                          C:\HomeController\Projects\zstack\Samples\GenericA #
#                          pp\CC2530DB\EndDeviceEB-Pro\Obj\ -e --debug        #
#                          --core=plain --dptr=16,1 --data_model=large        #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I C:\HomeController\Projects #
#                          \zstack\Samples\GenericApp\CC2530DB\ -I            #
#                          C:\HomeController\Projects\zstack\Samples\GenericA #
#                          pp\CC2530DB\..\SOURCE\ -I                          #
#                          C:\HomeController\Projects\zstack\Samples\GenericA #
#                          pp\CC2530DB\..\..\..\ZMAIN\TI2530DB\ -I            #
#                          C:\HomeController\Projects\zstack\Samples\GenericA #
#                          pp\CC2530DB\..\..\..\..\..\COMPONENTS\MT\ -I       #
#                          C:\HomeController\Projects\zstack\Samples\GenericA #
#                          pp\CC2530DB\..\..\..\..\..\COMPONENTS\HAL\INCLUDE\ #
#                           -I C:\HomeController\Projects\zstack\Samples\Gene #
#                          ricApp\CC2530DB\..\..\..\..\..\COMPONENTS\HAL\TARG #
#                          ET\CC2530EB\ -I C:\HomeController\Projects\zstack\ #
#                          Samples\GenericApp\CC2530DB\..\..\..\..\..\COMPONE #
#                          NTS\OSAL\MCU\CCSOC\ -I C:\HomeController\Projects\ #
#                          zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\ #
#                          COMPONENTS\OSAL\INCLUDE\ -I                        #
#                          C:\HomeController\Projects\zstack\Samples\GenericA #
#                          pp\CC2530DB\..\..\..\..\..\COMPONENTS\STACK\AF\    #
#                          -I C:\HomeController\Projects\zstack\Samples\Gener #
#                          icApp\CC2530DB\..\..\..\..\..\COMPONENTS\STACK\NWK #
#                          \ -I C:\HomeController\Projects\zstack\Samples\Gen #
#                          ericApp\CC2530DB\..\..\..\..\..\COMPONENTS\STACK\S #
#                          EC\ -I C:\HomeController\Projects\zstack\Samples\G #
#                          enericApp\CC2530DB\..\..\..\..\..\COMPONENTS\STACK #
#                          \SAPI\ -I C:\HomeController\Projects\zstack\Sample #
#                          s\GenericApp\CC2530DB\..\..\..\..\..\COMPONENTS\ST #
#                          ACK\SYS\ -I C:\HomeController\Projects\zstack\Samp #
#                          les\GenericApp\CC2530DB\..\..\..\..\..\COMPONENTS\ #
#                          STACK\ZDO\ -I C:\HomeController\Projects\zstack\Sa #
#                          mples\GenericApp\CC2530DB\..\..\..\..\..\COMPONENT #
#                          S\ZMAC\F8W\ -I C:\HomeController\Projects\zstack\S #
#                          amples\GenericApp\CC2530DB\..\..\..\..\..\COMPONEN #
#                          TS\ZMAC\ -I C:\HomeController\Projects\zstack\Samp #
#                          les\GenericApp\CC2530DB\..\..\..\..\..\COMPONENTS\ #
#                          SERVICES\SADDR\ -I C:\HomeController\Projects\zsta #
#                          ck\Samples\GenericApp\CC2530DB\..\..\..\..\..\COMP #
#                          ONENTS\SERVICES\SDATA\ -I                          #
#                          C:\HomeController\Projects\zstack\Samples\GenericA #
#                          pp\CC2530DB\..\..\..\..\..\COMPONENTS\MAC\INCLUDE\ #
#                           -I C:\HomeController\Projects\zstack\Samples\Gene #
#                          ricApp\CC2530DB\..\..\..\..\..\COMPONENTS\MAC\HIGH #
#                          _LEVEL\ -I C:\HomeController\Projects\zstack\Sampl #
#                          es\GenericApp\CC2530DB\..\..\..\..\..\COMPONENTS\M #
#                          AC\LOW_LEVEL\srf04\ -I C:\HomeController\Projects\ #
#                          zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\ #
#                          COMPONENTS\MAC\LOW_LEVEL\srf04\SINGLE_CHIP\ -Ohz   #
#                          --require_prototypes                               #
#    List file          =  C:\HomeController\Projects\zstack\Samples\GenericA #
#                          pp\CC2530DB\EndDeviceEB-Pro\List\GenericApp.lst    #
#    Object file        =  C:\HomeController\Projects\zstack\Samples\GenericA #
#                          pp\CC2530DB\EndDeviceEB-Pro\Obj\GenericApp.r51     #
#                                                                             #
#                                                                             #
###############################################################################

C:\HomeController\Projects\zstack\Samples\GenericApp\Source\GenericApp.c
      1          /**************************************************************************************************
      2            Filename:       GenericApp.c
      3            Revised:        $Date: 2009-03-18 15:56:27 -0700 (Wed, 18 Mar 2009) $
      4            Revision:       $Revision: 19453 $
      5          
      6            Description:    Generic Application (no Profile).
      7          
      8          
      9            Copyright 2004-2009 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED, 
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE, 
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com. 
     38          **************************************************************************************************/
     39          
     40          /*********************************************************************
     41            This application isn't intended to do anything useful, it is
     42            intended to be a simple example of an application's structure.
     43          
     44            This application sends "Hello World" to another "Generic"
     45            application every 15 seconds.  The application will also
     46            receive "Hello World" packets.
     47          
     48            The "Hello World" messages are sent/received as MSG type message.
     49          
     50            This applications doesn't have a profile, so it handles everything
     51            directly - itself.
     52          
     53            Key control:
     54              SW1:
     55              SW2:  initiates end device binding
     56              SW3:
     57              SW4:  initiates a match description request
     58          *********************************************************************/
     59          
     60          /*********************************************************************
     61           * INCLUDES
     62           */
     63          #include "OSAL.h"
     64          #include "AF.h"
     65          #include "ZDApp.h"
     66          #include "ZDObject.h"
     67          #include "ZDProfile.h"
     68          
     69          #include "GenericApp.h"
     70          #include "DebugTrace.h"
     71          
     72          #include "user_printf.h"
     73          
     74          #if !defined( WIN32 )
     75            #include "OnBoard.h"

   \                                 In  segment SFR_AN, at 0x87
   \   unsigned char volatile __sfr PCON
   \                     PCON:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0x89
   \   unsigned char volatile __sfr P0IFG
   \                     P0IFG:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0x8c
   \   unsigned char volatile __sfr PICTL
   \                     PICTL:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0x8f
   \   unsigned char volatile __sfr P0INP
   \                     P0INP:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xa8
   \   union <unnamed> volatile __sfr _A_IEN0
   \                     _A_IEN0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xab
   \   unsigned char volatile __sfr P0IEN
   \                     P0IEN:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xb8
   \   union <unnamed> volatile __sfr _A_IEN1
   \                     _A_IEN1:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xbe
   \   unsigned char volatile __sfr SLEEPCMD
   \                     SLEEPCMD:
   \   000000                DS 1
     76          #endif
     77          
     78          /* HAL */
     79          #include "hal_lcd.h"
     80          #include "hal_led.h"
     81          #include "hal_key.h"
     82          #include "hal_uart.h"
     83          #include "OSAL_Nv.h"
     84          
     85          /*********************************************************************
     86           * MACROS
     87           */
     88          #define HAL_LED_OFF   1
     89          #define HAL_LED_ON    0
     90          #define LIGHT_NUM 4
     91          
     92          
     93          // This is the max byte count per OTA message.
     94          #if !defined( SERIAL_APP_TX_MAX )
     95          #define SERIAL_APP_TX_MAX  80
     96          #endif
     97          
     98          /*********************************************************************
     99           * CONSTANTS
    100           */
    101          
    102          /*********************************************************************
    103           * TYPEDEFS
    104           */
    105          
    106          /*********************************************************************
    107           * GLOBAL VARIABLES
    108           */
    109          
    110          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    111          static uint16 lightOffTimeValue[LIGHT_NUM];
   \                     lightOffTimeValue:
   \   000000                DS 8
   \   000008                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    112          static uint16 currentTime[LIGHT_NUM];
   \                     currentTime:
   \   000000                DS 8
   \   000008                REQUIRE __INIT_XDATA_Z
    113          
    114          // This list should be filled with Application specific Cluster IDs.

   \                                 In  segment XDATA_ROM_C, align 1
    115          const cId_t GenericApp_ClusterList[GENERICAPP_MAX_CLUSTERS] =
   \                     GenericApp_ClusterList:
   \   000000   0100         DW 1
    116          {
    117            GENERICAPP_CLUSTERID
    118          };
    119          

   \                                 In  segment XDATA_ROM_C, align 1
    120          const SimpleDescriptionFormat_t GenericApp_SimpleDesc =
   \                     GenericApp_SimpleDesc:
   \   000000   0A           DB 10
   \   000001   040F         DW 3844
   \   000003   0100         DW 1
   \   000005   00           DB 0
   \   000006   01           DB 1
   \   000007   ....         DW GenericApp_ClusterList
   \   000009   01           DB 1
   \   00000A   ....         DW GenericApp_ClusterList
    121          {
    122            GENERICAPP_ENDPOINT,              //  int Endpoint;
    123            GENERICAPP_PROFID,                //  uint16 AppProfId[2];
    124            GENERICAPP_DEVICEID,              //  uint16 AppDeviceId[2];
    125            GENERICAPP_DEVICE_VERSION,        //  int   AppDevVer:4;
    126            GENERICAPP_FLAGS,                 //  int   AppFlags:4;
    127            GENERICAPP_MAX_CLUSTERS,          //  byte  AppNumInClusters;
    128            (cId_t *)GenericApp_ClusterList,  //  byte *pAppInClusterList;
    129            GENERICAPP_MAX_CLUSTERS,          //  byte  AppNumInClusters;
    130            (cId_t *)GenericApp_ClusterList   //  byte *pAppInClusterList;
    131          };
    132          
    133          // This is the Endpoint/Interface description.  It is defined here, but
    134          // filled-in in GenericApp_Init().  Another way to go would be to fill
    135          // in the structure here and make it a "const" (in code space).  The
    136          // way it's defined in this sample app it is define in RAM.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    137          endPointDesc_t GenericApp_epDesc;
   \                     GenericApp_epDesc:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z
    138          
    139          /*********************************************************************
    140           * EXTERNAL VARIABLES
    141           */
    142          
    143          /*********************************************************************
    144           * EXTERNAL FUNCTIONS
    145           */
    146          
    147          /*********************************************************************
    148           * LOCAL VARIABLES
    149           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    150          byte GenericApp_TaskID;   // Task ID for internal task/event processing
   \                     GenericApp_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    151                                    // This variable will be received when
    152                                    // GenericApp_Init() is called.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    153          devStates_t GenericApp_NwkState;
   \                     GenericApp_NwkState:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    154          
    155          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    156          byte GenericApp_TransID;  // This is the unique message ID (counter)
   \                     GenericApp_TransID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    157          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    158          afAddrType_t GenericApp_DstAddr;
   \                     GenericApp_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    159          byte RxBuf[SERIAL_APP_TX_MAX+1];
   \                     RxBuf:
   \   000000                DS 81
   \   000051                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    160          static uint8 SerialApp_TxLen;
   \                     SerialApp_TxLen:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    161          
    162          /*********************************************************************
    163           * LOCAL FUNCTIONS
    164           */
    165          void GenericApp_ProcessZDOMsgs( zdoIncomingMsg_t *inMsg );
    166          void GenericApp_HandleKeys( byte shift, byte keys );
    167          void GenericApp_MessageMSGCB( afIncomingMSGPacket_t *pckt );
    168          void GenericApp_SendTheMessage( void );
    169          void rxCB(uint8 port,uint8 event);
    170          static uint16 strToUint16(uint8* str);
    171          static uint8 strEqual(char* str1, char* str2);
    172          static void sendSendCmdMsg(uint8* cmd);
    173          
    174          void turnOffLightLater(uint16 addr, uint8 lightNum);
    175          void turnOnLight(uint16 addr, uint8 lightNum);
    176          void lightToggle(uint16 addr, uint8 lightNum);
    177          
    178          void setLightMode(uint8 lightNum, uint8 mode);
    179          
    180          void processLightStatus(afIncomingMSGPacket_t *pkt);
    181          void processLightOn(afIncomingMSGPacket_t *pkt);
    182          void processLightOff(afIncomingMSGPacket_t *pkt);
    183          void processLightToggle(afIncomingMSGPacket_t *inMsg);
    184          uint16 strToDec(uint8 * str);
    185          
    186          static void processLightOffLater(afIncomingMSGPacket_t *inMsg);
    187          
    188          
    189          /*********************************************************************
    190           * NETWORK LAYER CALLBACKS
    191           */
    192          
    193          /*********************************************************************
    194           * PUBLIC FUNCTIONS
    195           */
    196          
    197          /*********************************************************************
    198           * @fn      GenericApp_Init
    199           *
    200           * @brief   Initialization function for the Generic App Task.
    201           *          This is called during initialization and should contain
    202           *          any application specific initialization (ie. hardware
    203           *          initialization/setup, table initialization, power up
    204           *          notificaiton ... ).
    205           *
    206           * @param   task_id - the ID assigned by OSAL.  This ID should be
    207           *                    used to send messages and set timers.
    208           *
    209           * @return  none
    210           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    211          void GenericApp_Init( byte task_id )
   \                     GenericApp_Init:
    212          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 29
   \   000005   74E3         MOV     A,#-0x1d
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
    213            halUARTCfg_t uartConfig;
    214            
    215            GenericApp_TaskID = task_id;
   \   00000B   90....       MOV     DPTR,#GenericApp_TaskID
   \   00000E   F0           MOVX    @DPTR,A
    216            GenericApp_NwkState = DEV_INIT;
   \   00000F   90....       MOV     DPTR,#GenericApp_NwkState
   \   000012   7401         MOV     A,#0x1
   \   000014   F0           MOVX    @DPTR,A
    217            GenericApp_TransID = 0;
   \   000015   90....       MOV     DPTR,#GenericApp_TransID
   \   000018   E4           CLR     A
   \   000019   F0           MOVX    @DPTR,A
    218          
    219            // Device hardware initialization can be added here or in main() (Zmain.c).
    220            // If the hardware is application specific - add it here.
    221            // If the hardware is other parts of the device add it in main().
    222          
    223            GenericApp_DstAddr.addrMode = (afAddrMode_t)AddrNotPresent;
   \   00001A   90....       MOV     DPTR,#GenericApp_DstAddr + 8
   \   00001D   F0           MOVX    @DPTR,A
    224            GenericApp_DstAddr.endPoint = 0;
   \   00001E   A3           INC     DPTR
   \   00001F   F0           MOVX    @DPTR,A
    225            GenericApp_DstAddr.addr.shortAddr = 0;
   \   000020   90....       MOV     DPTR,#GenericApp_DstAddr
   \   000023   F0           MOVX    @DPTR,A
   \   000024   A3           INC     DPTR
   \   000025   F0           MOVX    @DPTR,A
    226          
    227            // Fill out the endpoint description.
    228            GenericApp_epDesc.endPoint = GENERICAPP_ENDPOINT;
   \   000026   90....       MOV     DPTR,#GenericApp_epDesc
   \   000029   740A         MOV     A,#0xa
   \   00002B   F0           MOVX    @DPTR,A
    229            GenericApp_epDesc.task_id = &GenericApp_TaskID;
   \   00002C   A3           INC     DPTR
   \   00002D   74..         MOV     A,#GenericApp_TaskID & 0xff
   \   00002F   F0           MOVX    @DPTR,A
   \   000030   A3           INC     DPTR
   \   000031   74..         MOV     A,#(GenericApp_TaskID >> 8) & 0xff
   \   000033   F0           MOVX    @DPTR,A
    230            GenericApp_epDesc.simpleDesc
    231                      = (SimpleDescriptionFormat_t *)&GenericApp_SimpleDesc;
   \   000034   A3           INC     DPTR
   \   000035   74..         MOV     A,#GenericApp_SimpleDesc & 0xff
   \   000037   F0           MOVX    @DPTR,A
   \   000038   A3           INC     DPTR
   \   000039   74..         MOV     A,#(GenericApp_SimpleDesc >> 8) & 0xff
   \   00003B   F0           MOVX    @DPTR,A
    232            GenericApp_epDesc.latencyReq = noLatencyReqs;
   \   00003C   A3           INC     DPTR
   \   00003D   E4           CLR     A
   \   00003E   F0           MOVX    @DPTR,A
    233          
    234            // Register the endpoint description with the AF
    235            afRegister( &GenericApp_epDesc );
   \   00003F                ; Setup parameters for call to function afRegister
   \   00003F   7A..         MOV     R2,#GenericApp_epDesc & 0xff
   \   000041   7B..         MOV     R3,#(GenericApp_epDesc >> 8) & 0xff
   \   000043   12....       LCALL   ??afRegister?relay
    236          
    237            // Register for all key events - This app will handle all key events
    238            RegisterForKeys( GenericApp_TaskID );
   \   000046                ; Setup parameters for call to function RegisterForKeys
   \   000046   90....       MOV     DPTR,#GenericApp_TaskID
   \   000049   E0           MOVX    A,@DPTR
   \   00004A   F9           MOV     R1,A
   \   00004B   12....       LCALL   ??RegisterForKeys?relay
    239            
    240            uartConfig.configured           = TRUE;              // 2x30 don't care - see uart driver.
   \   00004E   85..82       MOV     DPL,?XSP + 0
   \   000051   85..83       MOV     DPH,?XSP + 1
   \   000054   7401         MOV     A,#0x1
   \   000056   F0           MOVX    @DPTR,A
    241            uartConfig.baudRate             = HAL_UART_BR_115200;
   \   000057   12....       LCALL   ?XSTACK_DISP0_8
   \   00005A   7404         MOV     A,#0x4
   \   00005C   F0           MOVX    @DPTR,A
    242            uartConfig.flowControl          = FALSE;
   \   00005D   7402         MOV     A,#0x2
   \   00005F   12....       LCALL   ?XSTACK_DISP0_8
   \   000062   E4           CLR     A
   \   000063   F0           MOVX    @DPTR,A
    243            uartConfig.flowControlThreshold = 64;   // 2x30 don't care - see uart driver.
   \   000064   7403         MOV     A,#0x3
   \   000066   12....       LCALL   ?XSTACK_DISP0_8
   \   000069   7440         MOV     A,#0x40
   \   00006B   F0           MOVX    @DPTR,A
   \   00006C   A3           INC     DPTR
   \   00006D   E4           CLR     A
   \   00006E   F0           MOVX    @DPTR,A
    244            uartConfig.rx.maxBufSize        = 128;  // 2x30 don't care - see uart driver.
   \   00006F   740A         MOV     A,#0xa
   \   000071   12....       LCALL   ?XSTACK_DISP0_8
   \   000074   7480         MOV     A,#-0x80
   \   000076   F0           MOVX    @DPTR,A
   \   000077   A3           INC     DPTR
   \   000078   E4           CLR     A
   \   000079   F0           MOVX    @DPTR,A
    245            uartConfig.tx.maxBufSize        = 128;  // 2x30 don't care - see uart driver.
   \   00007A   7412         MOV     A,#0x12
   \   00007C   12....       LCALL   ?XSTACK_DISP0_8
   \   00007F   7480         MOV     A,#-0x80
   \   000081   F0           MOVX    @DPTR,A
   \   000082   A3           INC     DPTR
   \   000083   E4           CLR     A
   \   000084   F0           MOVX    @DPTR,A
    246            uartConfig.idleTimeout          = 6;    // 2x30 don't care - see uart driver.
   \   000085   7405         MOV     A,#0x5
   \   000087   12....       LCALL   ?XSTACK_DISP0_8
   \   00008A   7406         MOV     A,#0x6
   \   00008C   F0           MOVX    @DPTR,A
    247            uartConfig.intEnable            = TRUE; // 2x30 don't care - see uart driver.
   \   00008D   7416         MOV     A,#0x16
   \   00008F   12....       LCALL   ?XSTACK_DISP0_8
   \   000092   7401         MOV     A,#0x1
   \   000094   F0           MOVX    @DPTR,A
    248            uartConfig.callBackFunc         = rxCB;
   \   000095   741B         MOV     A,#0x1b
   \   000097   12....       LCALL   ?XSTACK_DISP0_8
   \   00009A   74..         MOV     A,#??rxCB?relay & 0xff
   \   00009C   F0           MOVX    @DPTR,A
   \   00009D   A3           INC     DPTR
   \   00009E   74..         MOV     A,#(??rxCB?relay >> 8) & 0xff
   \   0000A0   12....       LCALL   ?Subroutine17 & 0xFFFF
    249            HalUARTOpen (0, &uartConfig); 
   \                     ??CrossCallReturnLabel_25:
   \   0000A3   AA82         MOV     R2,DPL
   \   0000A5   AB83         MOV     R3,DPH
   \   0000A7   7900         MOV     R1,#0x0
   \   0000A9   12....       LCALL   ??HalUARTOpen?relay
    250            
    251            
    252            // Update the display
    253          #if defined ( LCD_SUPPORTED )
    254              HalLcdWriteString( "GenericApp", HAL_LCD_LINE_1 );
   \   0000AC                ; Setup parameters for call to function HalLcdWriteString
   \   0000AC   7901         MOV     R1,#0x1
   \   0000AE   7A..         MOV     R2,#`?<Constant "GenericApp">` & 0xff
   \   0000B0   7B..         MOV     R3,#(`?<Constant "GenericApp">` >> 8) & 0xff
   \   0000B2   12....       LCALL   ??HalLcdWriteString?relay
    255          #endif
    256              
    257             
    258            //ZDO_RegisterForZDOMsg( GenericApp_TaskID, End_Device_Bind_rsp );
    259            //ZDO_RegisterForZDOMsg( GenericApp_TaskID, Match_Desc_rsp );
    260             
    261              for (int i = 0; i < LIGHT_NUM; i++) {
   \   0000B5   7A00         MOV     R2,#0x0
   \   0000B7   7B00         MOV     R3,#0x0
    262                
    263                lightOffTimeValue[i] = 0;
   \                     ??GenericApp_Init_0:
   \   0000B9   EA           MOV     A,R2
   \   0000BA   F8           MOV     R0,A
   \   0000BB   EB           MOV     A,R3
   \   0000BC   F9           MOV     R1,A
   \   0000BD   E8           MOV     A,R0
   \   0000BE   C3           CLR     C
   \   0000BF   33           RLC     A
   \   0000C0   F8           MOV     R0,A
   \   0000C1   E9           MOV     A,R1
   \   0000C2   33           RLC     A
   \   0000C3   F9           MOV     R1,A
   \   0000C4   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_4:
   \   0000C7   E4           CLR     A
   \   0000C8   F0           MOVX    @DPTR,A
   \   0000C9   A3           INC     DPTR
   \   0000CA   F0           MOVX    @DPTR,A
    264                currentTime[i] = 0;
   \   0000CB   12....       LCALL   ?Subroutine9 & 0xFFFF
    265              }
   \                     ??CrossCallReturnLabel_12:
   \   0000CE   E4           CLR     A
   \   0000CF   F0           MOVX    @DPTR,A
   \   0000D0   A3           INC     DPTR
   \   0000D1   F0           MOVX    @DPTR,A
   \   0000D2   EA           MOV     A,R2
   \   0000D3   2401         ADD     A,#0x1
   \   0000D5   0A           INC     R2
   \   0000D6   EB           MOV     A,R3
   \   0000D7   3400         ADDC    A,#0x0
   \   0000D9   FB           MOV     R3,A
   \   0000DA   C3           CLR     C
   \   0000DB   EA           MOV     A,R2
   \   0000DC   9404         SUBB    A,#0x4
   \   0000DE   EB           MOV     A,R3
   \   0000DF   9400         SUBB    A,#0x0
   \   0000E1   A2D2         MOV     C,0xD0 /* PSW */.2
   \   0000E3   65D0         XRL     A,PSW
   \   0000E5   33           RLC     A
   \   0000E6   40D1         JC      ??GenericApp_Init_0
    266              
    267            // turn on all light by default
    268            HalLedSet( HAL_LED_ALL, HAL_LED_MODE_ON );
   \   0000E8                ; Setup parameters for call to function HalLedSet
   \   0000E8   7A01         MOV     R2,#0x1
   \   0000EA   790F         MOV     R1,#0xf
   \   0000EC   12....       LCALL   ??HalLedSet?relay
    269            
    270          #if ZG_BUILD_ENDDEVICE_TYPE
    271            
    272            P0INP  &= ~0X10;   //设置P0口输入电路模式为上拉/ 下拉
   \   0000EF   538FEF       ANL     0x8f,#0xef
    273                  P0IEN |= 0X10;     //P01设置为中断方式 
   \   0000F2   43AB10       ORL     0xab,#0x10
    274                  PICTL |= 0X10;     // 下降沿触发     
   \   0000F5   438C10       ORL     0x8c,#0x10
    275             IEN1 |= 0X20;      //  开P0口总中断 
   \   0000F8   D2BD         SETB    0xb8.5
    276                  P0IFG |= 0x00;     //清中断标志
   \   0000FA   858989       MOV     0x89,0x89
    277          	EA = 1; 
   \   0000FD   D2AF         SETB    0xa8.7
    278          #endif
    279                  
    280            printf("GenericApp_Init[%s] Done!\n", getMyName());
   \   0000FF                ; Setup parameters for call to function printf
   \   0000FF                ; Setup parameters for call to function getMyName
   \   0000FF   12....       LCALL   ?Subroutine11 & 0xFFFF
   \                     ??CrossCallReturnLabel_14:
   \   000102   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000105   7A..         MOV     R2,#`?<Constant "GenericApp_Init[%s] D...">` & 0xff
   \   000107   7B..         MOV     R3,#(`?<Constant "GenericApp_Init[%s] D...">` >> 8) & 0xff
   \   000109   12....       LCALL   ??Subroutine23_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_58:
   \   00010C   12....       LCALL   ?DEALLOC_XSTACK8
    281            
    282          }
   \   00010F   741D         MOV     A,#0x1d
   \   000111   02....       LJMP    ??Subroutine24_0 & 0xFFFF
   \   000114                REQUIRE P0INP
   \   000114                REQUIRE P0IEN
   \   000114                REQUIRE PICTL
   \   000114                REQUIRE _A_IEN1
   \   000114                REQUIRE P0IFG
   \   000114                REQUIRE _A_IEN0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   74..         MOV     A,#lightOffTimeValue & 0xff
   \   000002   28           ADD     A,R0
   \   000003   F582         MOV     DPL,A
   \   000005   74..         MOV     A,#(lightOffTimeValue >> 8) & 0xff
   \   000007   39           ADDC    A,R1
   \   000008   F583         MOV     DPH,A
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   74..         MOV     A,#currentTime & 0xff
   \   000002   28           ADD     A,R0
   \   000003   F582         MOV     DPL,A
   \   000005   74..         MOV     A,#(currentTime >> 8) & 0xff
   \   000007   39           ADDC    A,R1
   \   000008   F583         MOV     DPH,A
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   12....       LCALL   ??getMyName?relay
   \   000003   8A..         MOV     ?V0 + 0,R2
   \   000005   8B..         MOV     ?V0 + 1,R3
   \   000007   78..         MOV     R0,#?V0 + 0
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine23_0:
   \   000000   12....       LCALL   ??printf?relay
   \   000003   7402         MOV     A,#0x2
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine17:
   \   000000   F0           MOVX    @DPTR,A
   \   000001                ; Setup parameters for call to function HalUARTOpen
   \   000001                ; Setup parameters for call to function printf
   \   000001   85..82       MOV     DPL,?XSP + 0
   \   000004   85..83       MOV     DPH,?XSP + 1
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine24_0:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003                REQUIRE ??Subroutine25_0
   \   000003                ; // Fall through to label ??Subroutine25_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine25_0:
   \   000000   7F02         MOV     R7,#0x2
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
    283          
    284          static void resetCurrentTime(uint8 lightNumber);
    285          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    286          void resetCurrentTime(uint8 lightNumber)
   \                     resetCurrentTime:
    287          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    288            currentTime[lightNumber] = 0;
   \   000004   E9           MOV     A,R1
   \   000005   C3           CLR     C
   \   000006   33           RLC     A
   \   000007   FA           MOV     R2,A
   \   000008   E4           CLR     A
   \   000009   33           RLC     A
   \   00000A   FB           MOV     R3,A
   \   00000B   74..         MOV     A,#currentTime & 0xff
   \   00000D   2A           ADD     A,R2
   \   00000E   F582         MOV     DPL,A
   \   000010   74..         MOV     A,#(currentTime >> 8) & 0xff
   \   000012   3B           ADDC    A,R3
   \   000013   F583         MOV     DPH,A
   \   000015   E4           CLR     A
   \   000016   F0           MOVX    @DPTR,A
   \   000017   A3           INC     DPTR
   \   000018   F0           MOVX    @DPTR,A
    289            lightOffTimeValue[lightNumber] = 0;
   \   000019   74..         MOV     A,#lightOffTimeValue & 0xff
   \   00001B   2A           ADD     A,R2
   \   00001C   F582         MOV     DPL,A
   \   00001E   74..         MOV     A,#(lightOffTimeValue >> 8) & 0xff
   \   000020   3B           ADDC    A,R3
   \   000021   F583         MOV     DPH,A
   \   000023   E4           CLR     A
   \   000024   F0           MOVX    @DPTR,A
   \   000025   A3           INC     DPTR
   \   000026   F0           MOVX    @DPTR,A
    290          }
   \   000027   80..         SJMP    ??Subroutine19_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine19_0:
   \   000000   D083         POP     DPH
   \   000002   D082         POP     DPL
   \   000004   02....       LJMP    ?BRET
    291          
    292          void SysPowerMode(uint8 mode);
    293          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    294          void SysPowerMode(uint8 mode) 
   \                     SysPowerMode:
    295          { 
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    296           uint8 i,j; 
    297           i = mode; 
    298           if(mode<4) 
   \   000000   E9           MOV     A,R1
   \   000001   C3           CLR     C
   \   000002   9404         SUBB    A,#0x4
   \   000004   5008         JNC     ??SysPowerMode_0
    299           {  
    300              SLEEPCMD |= i;     // 设置系统睡眠模式 
   \   000006   E9           MOV     A,R1
   \   000007   42BE         ORL     0xbe,A
    301            for(j=0;j<4;j++); 
    302              PCON = 0x01;         // 进入睡眠模式 ,通过中断打断
   \   000009   758701       MOV     0x87,#0x1
   \   00000C   8003         SJMP    ??SysPowerMode_1
    303            } 
    304           else 
    305           { 
    306                PCON = 0x00;             // 系统唤醒 ，通过中断打断
   \                     ??SysPowerMode_0:
   \   00000E   758700       MOV     0x87,#0x0
    307           } 
    308          }
   \                     ??SysPowerMode_1:
   \   000011   02....       LJMP    ?BRET
   \   000014                REQUIRE SLEEPCMD
   \   000014                REQUIRE PCON
    309          
    310          /*********************************************************************
    311           * @fn      GenericApp_ProcessEvent
    312           *
    313           * @brief   Generic Application Task event processor.  This function
    314           *          is called to process all events for the task.  Events
    315           *          include timers, messages and any other user defined events.
    316           *
    317           * @param   task_id  - The OSAL assigned task ID.
    318           * @param   events - events to process.  This is a bit map and can
    319           *                   contain more than one event.
    320           *
    321           * @return  none
    322           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    323          UINT16 GenericApp_ProcessEvent( byte task_id, UINT16 events )
   \                     GenericApp_ProcessEvent:
    324          {
   \   000000   74F1         MOV     A,#-0xf
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 15
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    325            afIncomingMSGPacket_t *MSGpkt;
    326            afDataConfirm_t *afDataConfirm;
    327          
    328            // Data Confirmation message fields
    329            byte sentEP;
    330            ZStatus_t sentStatus;
    331            byte sentTransID;       // This should match the value sent
    332            (void)task_id;  // Intentionally unreferenced parameter
    333          
    334            if ( events & SYS_EVENT_MSG )
   \   000009   5480         ANL     A,#0x80
   \   00000B   7003         JNZ     $+5
   \   00000D   02....       LJMP    ??GenericApp_ProcessEvent_0 & 0xFFFF
    335            {
    336              MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( GenericApp_TaskID );
   \   000010                ; Setup parameters for call to function osal_msg_receive
   \   000010   8060         SJMP    ??GenericApp_ProcessEvent_1
    337              while ( MSGpkt )
    338              {
    339                switch ( MSGpkt->hdr.event )
    340                {
    341                  case ZDO_CB_MSG:
    342                    GenericApp_ProcessZDOMsgs( (zdoIncomingMsg_t *)MSGpkt );
    343                    break;
    344                    
    345                  case KEY_CHANGE:
    346                    GenericApp_HandleKeys( ((keyChange_t *)MSGpkt)->state, ((keyChange_t *)MSGpkt)->keys );
    347                    break;
    348          
    349                  case AF_DATA_CONFIRM_CMD:
    350                    // This message is received as a confirmation of a data packet sent.
    351                    // The status is of ZStatus_t type [defined in ZComDef.h]
    352                    // The message fields are defined in AF.h
    353                    afDataConfirm = (afDataConfirm_t *)MSGpkt;
    354                    sentEP = afDataConfirm->endpoint;
    355                    sentStatus = afDataConfirm->hdr.status;
    356                    sentTransID = afDataConfirm->transID;
    357                    (void)sentEP;
    358                    (void)sentTransID;
    359          
    360                    // Action taken when confirmation is received.
    361                    if ( sentStatus != ZSuccess )
    362                    {
    363                      // The data wasn't delivered -- Do something
    364                    }
    365                    break;
    366          
    367                  case AF_INCOMING_MSG_CMD:
    368                    GenericApp_MessageMSGCB( MSGpkt );
    369                    break;
    370          
    371                  case ZDO_STATE_CHANGE:
    372                    GenericApp_NwkState = (devStates_t)(MSGpkt->hdr.status);
   \                     ??GenericApp_ProcessEvent_2:
   \   000012   A3           INC     DPTR
   \   000013   E0           MOVX    A,@DPTR
   \   000014   90....       MOV     DPTR,#GenericApp_NwkState
   \   000017   F0           MOVX    @DPTR,A
    373                    if ( (GenericApp_NwkState == DEV_ZB_COORD)
    374                        || (GenericApp_NwkState == DEV_ROUTER)
    375                        || (GenericApp_NwkState == DEV_END_DEVICE) )
   \   000018   6409         XRL     A,#0x9
   \   00001A   600A         JZ      ??GenericApp_ProcessEvent_3
   \   00001C   E0           MOVX    A,@DPTR
   \   00001D   6407         XRL     A,#0x7
   \   00001F   6005         JZ      ??GenericApp_ProcessEvent_3
   \   000021   E0           MOVX    A,@DPTR
   \   000022   6406         XRL     A,#0x6
   \   000024   7045         JNZ     ??CrossCallReturnLabel_29
    376                    {
    377                        
    378                      HalLedSet ( HAL_LED_ALL, HAL_LED_MODE_ON );
   \                     ??GenericApp_ProcessEvent_3:
   \   000026                ; Setup parameters for call to function HalLedSet
   \   000026   7A01         MOV     R2,#0x1
   \   000028   790F         MOV     R1,#0xf
   \   00002A   12....       LCALL   ??HalLedSet?relay
    379                     
    380                    //  byte* extAddr = NLME_GetExtAddr();
    381                      uint16 shortAddr = NLME_GetShortAddr();
   \   00002D                ; Setup parameters for call to function NLME_GetShortAddr
   \   00002D   12....       LCALL   ??NLME_GetShortAddr?relay
   \   000030   8A..         MOV     ?V0 + 2,R2
   \   000032   8B..         MOV     ?V0 + 3,R3
    382                      uint16 parentShortAddr = NLME_GetCoordShortAddr();
    383                      
    384                      printf("Addr=%04X, ParentAddr=%04X\n", shortAddr, parentShortAddr);
   \   000034                ; Setup parameters for call to function printf
   \   000034                ; Setup parameters for call to function NLME_GetCoordShortAddr
   \   000034   12....       LCALL   ??NLME_GetCoordShortAddr?relay
   \   000037   8A..         MOV     ?V0 + 4,R2
   \   000039   8B..         MOV     ?V0 + 5,R3
   \   00003B   78..         MOV     R0,#?V0 + 4
   \   00003D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000040   78..         MOV     R0,#?V0 + 2
   \   000042   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000045   7A..         MOV     R2,#`?<Constant "Addr=%04X, ParentAddr...">` & 0xff
   \   000047   7B..         MOV     R3,#(`?<Constant "Addr=%04X, ParentAddr...">` >> 8) & 0xff
   \   000049   12....       LCALL   ??printf?relay
   \   00004C   7404         MOV     A,#0x4
   \   00004E   12....       LCALL   ?DEALLOC_XSTACK8
    385                      
    386                      osal_start_timerEx( GenericApp_TaskID,
    387                                  GENERICAPP_LIGHT_OFF_LATER_EVT,
    388                                GENERICAPP_LIGHT_OFF_LATER_TIMEOUT );
   \   000051                ; Setup parameters for call to function osal_start_timerEx
   \   000051   7CE8         MOV     R4,#-0x18
   \   000053   7D03         MOV     R5,#0x3
   \   000055   7A02         MOV     R2,#0x2
   \   000057   12....       LCALL   ?Subroutine18 & 0xFFFF
    389                      
    390                      if (GenericApp_NwkState == DEV_END_DEVICE) {
   \                     ??CrossCallReturnLabel_28:
   \   00005A   90....       MOV     DPTR,#GenericApp_NwkState
   \   00005D   E0           MOVX    A,@DPTR
   \   00005E   6406         XRL     A,#0x6
   \   000060   7009         JNZ     ??CrossCallReturnLabel_29
    391                         osal_start_timerEx( GenericApp_TaskID,
    392                                      GENERICAPP_SLEEP_LATER_EVT,
    393                                    1000 );
   \   000062                ; Setup parameters for call to function osal_start_timerEx
   \   000062   7CE8         MOV     R4,#-0x18
   \   000064   7D03         MOV     R5,#0x3
   \   000066   7A04         MOV     R2,#0x4
   \   000068   12....       LCALL   ?Subroutine18 & 0xFFFF
    394                      }
    395                    }
    396                    
    397                    
    398                    break;
    399          
    400                  default:
    401                    break;
    402                }
    403          
    404                // Release the memory
    405                osal_msg_deallocate( (uint8 *)MSGpkt );
   \                     ??CrossCallReturnLabel_29:
   \   00006B                ; Setup parameters for call to function osal_msg_deallocate
   \   00006B   AA..         MOV     R2,?V0 + 0
   \   00006D   AB..         MOV     R3,?V0 + 1
   \   00006F   12....       LCALL   ??osal_msg_deallocate?relay
    406          
    407                // Next
    408                MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( GenericApp_TaskID );
   \   000072                ; Setup parameters for call to function osal_msg_receive
   \                     ??GenericApp_ProcessEvent_1:
   \   000072   90....       MOV     DPTR,#GenericApp_TaskID
   \   000075   E0           MOVX    A,@DPTR
   \   000076   F9           MOV     R1,A
   \   000077   12....       LCALL   ??osal_msg_receive?relay
   \   00007A   8A..         MOV     ?V0 + 0,R2
   \   00007C   8B..         MOV     ?V0 + 1,R3
   \   00007E   E5..         MOV     A,?V0 + 0
   \   000080   45..         ORL     A,?V0 + 1
   \   000082   6040         JZ      ??GenericApp_ProcessEvent_4
   \   000084   85..82       MOV     DPL,?V0 + 0
   \   000087   85..83       MOV     DPH,?V0 + 1
   \   00008A   E0           MOVX    A,@DPTR
   \   00008B   24E6         ADD     A,#-0x1a
   \   00008D   602C         JZ      ??GenericApp_ProcessEvent_5
   \   00008F   245A         ADD     A,#0x5a
   \   000091   6014         JZ      ??GenericApp_ProcessEvent_6
   \   000093   24EF         ADD     A,#-0x11
   \   000095   7003         JNZ     $+5
   \   000097   02....       LJMP    ??GenericApp_ProcessEvent_2 & 0xFFFF
   \   00009A   24FE         ADD     A,#-0x2
   \   00009C   70CD         JNZ     ??CrossCallReturnLabel_29
   \   00009E                ; Setup parameters for call to function GenericApp_ProcessZDOMsgs
   \   00009E   AA..         MOV     R2,?V0 + 0
   \   0000A0   AB..         MOV     R3,?V0 + 1
   \   0000A2   12....       LCALL   ??GenericApp_ProcessZDOMsgs?relay
   \   0000A5   80C4         SJMP    ??CrossCallReturnLabel_29
   \                     ??GenericApp_ProcessEvent_6:
   \   0000A7                ; Setup parameters for call to function GenericApp_HandleKeys
   \   0000A7   A3           INC     DPTR
   \   0000A8   A3           INC     DPTR
   \   0000A9   A3           INC     DPTR
   \   0000AA   E0           MOVX    A,@DPTR
   \   0000AB   FA           MOV     R2,A
   \   0000AC   85..82       MOV     DPL,?V0 + 0
   \   0000AF   85..83       MOV     DPH,?V0 + 1
   \   0000B2   A3           INC     DPTR
   \   0000B3   A3           INC     DPTR
   \   0000B4   E0           MOVX    A,@DPTR
   \   0000B5   F9           MOV     R1,A
   \   0000B6   12....       LCALL   ??GenericApp_HandleKeys?relay
   \   0000B9   80B0         SJMP    ??CrossCallReturnLabel_29
   \                     ??GenericApp_ProcessEvent_5:
   \   0000BB                ; Setup parameters for call to function GenericApp_MessageMSGCB
   \   0000BB   AA..         MOV     R2,?V0 + 0
   \   0000BD   AB..         MOV     R3,?V0 + 1
   \   0000BF   12....       LCALL   ??GenericApp_MessageMSGCB?relay
   \   0000C2   80A7         SJMP    ??CrossCallReturnLabel_29
    409              }
    410          
    411              // return unprocessed events
    412              return (events ^ SYS_EVENT_MSG);
   \                     ??GenericApp_ProcessEvent_4:
   \   0000C4   EE           MOV     A,R6
   \   0000C5   FA           MOV     R2,A
   \   0000C6   EF           MOV     A,R7
   \   0000C7   6480         XRL     A,#0x80
   \                     ??GenericApp_ProcessEvent_7:
   \   0000C9   FB           MOV     R3,A
   \   0000CA   02....       LJMP    ??GenericApp_ProcessEvent_8 & 0xFFFF
    413            }
    414          
    415            // Send a message out - This event is generated by a timer
    416            //  (setup in GenericApp_Init()).
    417            if ( events & GENERICAPP_SEND_MSG_EVT )
   \                     ??GenericApp_ProcessEvent_0:
   \   0000CD   EE           MOV     A,R6
   \   0000CE   A2E0         MOV     C,0xE0 /* A   */.0
   \   0000D0   5012         JNC     ??GenericApp_ProcessEvent_9
    418            {
    419              // Send "the" message
    420              GenericApp_SendTheMessage();
   \   0000D2                ; Setup parameters for call to function GenericApp_SendTheMessage
   \   0000D2   12....       LCALL   ??GenericApp_SendTheMessage?relay
    421          
    422              // Setup to send message again
    423              osal_start_timerEx( GenericApp_TaskID,
    424                                  GENERICAPP_SEND_MSG_EVT,
    425                                GENERICAPP_SEND_MSG_TIMEOUT );
   \   0000D5                ; Setup parameters for call to function osal_start_timerEx
   \   0000D5   7C88         MOV     R4,#-0x78
   \   0000D7   7D13         MOV     R5,#0x13
   \   0000D9   7A01         MOV     R2,#0x1
   \   0000DB   12....       LCALL   ?Subroutine8 & 0xFFFF
    426          
    427              // return unprocessed events
    428              return (events ^ GENERICAPP_SEND_MSG_EVT);
    429            }
   \                     ??CrossCallReturnLabel_9:
   \   0000DE   6401         XRL     A,#0x1
   \                     ??GenericApp_ProcessEvent_10:
   \   0000E0   FA           MOV     R2,A
   \   0000E1   EF           MOV     A,R7
   \   0000E2   80E5         SJMP    ??GenericApp_ProcessEvent_7
    430            
    431            if ( events & GENERICAPP_LIGHT_OFF_LATER_EVT )
   \                     ??GenericApp_ProcessEvent_9:
   \   0000E4   5402         ANL     A,#0x2
   \   0000E6   7003         JNZ     $+5
   \   0000E8   02....       LJMP    ??GenericApp_ProcessEvent_11 & 0xFFFF
    432            {
    433              
    434                for (uint8 i = 0; i < LIGHT_NUM; i++) {
   \   0000EB   75..00       MOV     ?V0 + 6,#0x0
    435                  currentTime[i]++;
   \                     ??GenericApp_ProcessEvent_12:
   \   0000EE   85..82       MOV     DPL,?V0 + 6
   \   0000F1   8582..       MOV     ?V0 + 0,DPL
   \   0000F4   75..00       MOV     ?V0 + 1,#0x0
   \   0000F7   E5..         MOV     A,?V0 + 0
   \   0000F9   C3           CLR     C
   \   0000FA   33           RLC     A
   \   0000FB   F8           MOV     R0,A
   \   0000FC   E4           CLR     A
   \   0000FD   33           RLC     A
   \   0000FE   F9           MOV     R1,A
   \   0000FF   74..         MOV     A,#currentTime & 0xff
   \   000101   28           ADD     A,R0
   \   000102   FA           MOV     R2,A
   \   000103   74..         MOV     A,#(currentTime >> 8) & 0xff
   \   000105   39           ADDC    A,R1
   \   000106   FB           MOV     R3,A
   \   000107   8A82         MOV     DPL,R2
   \   000109   8B83         MOV     DPH,R3
   \   00010B   E0           MOVX    A,@DPTR
   \   00010C   2401         ADD     A,#0x1
   \   00010E   F0           MOVX    @DPTR,A
   \   00010F   A3           INC     DPTR
   \   000110   E0           MOVX    A,@DPTR
   \   000111   3400         ADDC    A,#0x0
   \   000113   F0           MOVX    @DPTR,A
    436                    
    437                  if (lightOffTimeValue[i] > 0 && currentTime[i] > lightOffTimeValue[i]) {
   \   000114   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_5:
   \   000117   E0           MOVX    A,@DPTR
   \   000118   F5..         MOV     ?V0 + 2,A
   \   00011A   A3           INC     DPTR
   \   00011B   E0           MOVX    A,@DPTR
   \   00011C   F5..         MOV     ?V0 + 3,A
   \   00011E   E5..         MOV     A,?V0 + 2
   \   000120   45..         ORL     A,?V0 + 3
   \   000122   603B         JZ      ??CrossCallReturnLabel_18
   \   000124   8A82         MOV     DPL,R2
   \   000126   8B83         MOV     DPH,R3
   \   000128   E0           MOVX    A,@DPTR
   \   000129   F5..         MOV     ?V0 + 4,A
   \   00012B   A3           INC     DPTR
   \   00012C   E0           MOVX    A,@DPTR
   \   00012D   F5..         MOV     ?V0 + 5,A
   \   00012F   C3           CLR     C
   \   000130   E5..         MOV     A,?V0 + 2
   \   000132   95..         SUBB    A,?V0 + 4
   \   000134   E5..         MOV     A,?V0 + 3
   \   000136   95..         SUBB    A,?V0 + 5
   \   000138   5025         JNC     ??CrossCallReturnLabel_18
    438                    
    439                    printf("current[%d] : %d, LightOffTimeValue[%d]: %d\n", i, currentTime[i], i, lightOffTimeValue[i]);
   \   00013A                ; Setup parameters for call to function printf
   \   00013A   78..         MOV     R0,#?V0 + 2
   \   00013C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00013F   78..         MOV     R0,#?V0 + 0
   \   000141   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000144   78..         MOV     R0,#?V0 + 4
   \   000146   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000149   78..         MOV     R0,#?V0 + 0
   \   00014B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00014E   7A..         MOV     R2,#`?<Constant "current[%d] : %d, Lig...">` & 0xff
   \   000150   7B..         MOV     R3,#(`?<Constant "current[%d] : %d, Lig...">` >> 8) & 0xff
   \   000152   12....       LCALL   ??printf?relay
   \   000155   7408         MOV     A,#0x8
   \   000157   12....       LCALL   ?DEALLOC_XSTACK8
    440                    
    441                    setLightMode(i, HAL_LED_MODE_OFF);
   \   00015A                ; Setup parameters for call to function setLightMode
   \   00015A   7A00         MOV     R2,#0x0
   \   00015C   12....       LCALL   ?Subroutine13 & 0xFFFF
    442                    
    443                    resetCurrentTime(i);
    444                    
    445                  }
    446                }
   \                     ??CrossCallReturnLabel_18:
   \   00015F   05..         INC     ?V0 + 6
   \   000161   E5..         MOV     A,?V0 + 6
   \   000163   C3           CLR     C
   \   000164   9404         SUBB    A,#0x4
   \   000166   4086         JC      ??GenericApp_ProcessEvent_12
    447            
    448                osal_start_timerEx( GenericApp_TaskID,
    449                                    GENERICAPP_LIGHT_OFF_LATER_EVT,
    450                                  GENERICAPP_LIGHT_OFF_LATER_TIMEOUT );
   \   000168                ; Setup parameters for call to function osal_start_timerEx
   \   000168   7CE8         MOV     R4,#-0x18
   \   00016A   7D03         MOV     R5,#0x3
   \   00016C   7A02         MOV     R2,#0x2
   \   00016E   12....       LCALL   ?Subroutine8 & 0xFFFF
    451                
    452                // return unprocessed events
    453                return (events ^ GENERICAPP_LIGHT_OFF_LATER_EVT);
    454            }
   \                     ??CrossCallReturnLabel_10:
   \   000171   6402         XRL     A,#0x2
   \   000173   02....       LJMP    ??GenericApp_ProcessEvent_10 & 0xFFFF
    455            
    456            if ( events & GENERICAPP_SLEEP_LATER_EVT )
   \                     ??GenericApp_ProcessEvent_11:
   \   000176   EE           MOV     A,R6
   \   000177   5404         ANL     A,#0x4
   \   000179   6050         JZ      ??GenericApp_ProcessEvent_13
    457            {
    458              
    459               static int n = 1;
    460               
    461               printf("awake[%d]...\n", n);
   \   00017B                ; Setup parameters for call to function printf
   \   00017B   90....       MOV     DPTR,#??n
   \   00017E   12....       LCALL   ?PUSH_XSTACK8_X_TWO
   \   000181   7A..         MOV     R2,#`?<Constant "awake[%d]...\\n">` & 0xff
   \   000183   7B..         MOV     R3,#(`?<Constant "awake[%d]...\\n">` >> 8) & 0xff
   \   000185   12....       LCALL   ??Subroutine23_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_59:
   \   000188   12....       LCALL   ?DEALLOC_XSTACK8
    462               
    463               if (n++ % 10 == 0) {
   \   00018B   90....       MOV     DPTR,#??n
   \   00018E   E0           MOVX    A,@DPTR
   \   00018F   F8           MOV     R0,A
   \   000190   A3           INC     DPTR
   \   000191   E0           MOVX    A,@DPTR
   \   000192   F9           MOV     R1,A
   \   000193   E8           MOV     A,R0
   \   000194   2401         ADD     A,#0x1
   \   000196   FA           MOV     R2,A
   \   000197   E9           MOV     A,R1
   \   000198   3400         ADDC    A,#0x0
   \   00019A   FB           MOV     R3,A
   \   00019B   90....       MOV     DPTR,#??n
   \   00019E   EA           MOV     A,R2
   \   00019F   F0           MOVX    @DPTR,A
   \   0001A0   A3           INC     DPTR
   \   0001A1   EB           MOV     A,R3
   \   0001A2   F0           MOVX    @DPTR,A
   \   0001A3   7A0A         MOV     R2,#0xa
   \   0001A5   7B00         MOV     R3,#0x0
   \   0001A7   12....       LCALL   ?S_DIV_MOD
   \   0001AA   8B..         MOV     ?V0 + 1,R3
   \   0001AC   EA           MOV     A,R2
   \   0001AD   45..         ORL     A,?V0 + 1
   \   0001AF   700C         JNZ     ??GenericApp_ProcessEvent_14
    464                 printf("sleep now\n");
   \   0001B1                ; Setup parameters for call to function printf
   \   0001B1   7A..         MOV     R2,#`?<Constant "sleep now\\n">` & 0xff
   \   0001B3   7B..         MOV     R3,#(`?<Constant "sleep now\\n">` >> 8) & 0xff
   \   0001B5   12....       LCALL   ??printf?relay
    465                SysPowerMode(3);
   \   0001B8                ; Setup parameters for call to function SysPowerMode
   \   0001B8   7903         MOV     R1,#0x3
   \   0001BA   12....       LCALL   ??SysPowerMode?relay
    466               }
    467            
    468                osal_start_timerEx( GenericApp_TaskID,
    469                                    GENERICAPP_SLEEP_LATER_EVT,
    470                                  1000 );
   \                     ??GenericApp_ProcessEvent_14:
   \   0001BD                ; Setup parameters for call to function osal_start_timerEx
   \   0001BD   7CE8         MOV     R4,#-0x18
   \   0001BF   7D03         MOV     R5,#0x3
   \   0001C1   7A04         MOV     R2,#0x4
   \   0001C3   12....       LCALL   ?Subroutine8 & 0xFFFF
    471                
    472                // return unprocessed events
    473                return (events ^ GENERICAPP_SLEEP_LATER_EVT);
    474            }
   \                     ??CrossCallReturnLabel_11:
   \   0001C6   6404         XRL     A,#0x4
   \   0001C8   02....       LJMP    ??GenericApp_ProcessEvent_10 & 0xFFFF
    475          
    476            // Discard unknown events
    477            return 0;
   \                     ??GenericApp_ProcessEvent_13:
   \   0001CB   7A00         MOV     R2,#0x0
   \   0001CD   7B00         MOV     R3,#0x0
   \                     ??GenericApp_ProcessEvent_8:
   \   0001CF   7F07         MOV     R7,#0x7
   \   0001D1   02....       LJMP    ?BANKED_LEAVE_XDATA
    478          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_30:
   \   000003   EE           MOV     A,R6
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine18:
   \   000000   7B00         MOV     R3,#0x0
   \   000002   90....       MOV     DPTR,#GenericApp_TaskID
   \   000005   E0           MOVX    A,@DPTR
   \   000006   F9           MOV     R1,A
   \   000007   12....       LCALL   ??osal_start_timerEx?relay
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   A9..         MOV     R1,?V0 + 6
   \   000002   12....       LCALL   ??setLightMode?relay
   \   000005                ; Setup parameters for call to function resetCurrentTime
   \   000005                ; Setup parameters for call to function resetCurrentTime
   \   000005   A9..         MOV     R1,?V0 + 6
   \   000007   12....       LCALL   ??resetCurrentTime?relay
   \   00000A   22           RET

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     ??n:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for n>`
   \   000002                REQUIRE __INIT_XDATA_I
    479          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    480          void setLightMode(uint8 lightNum, uint8 mode)
   \                     setLightMode:
    481          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FF           MOV     R7,A
    482            uint8 led = 0;
    483            switch(lightNum) {
   \   000007   600B         JZ      ??setLightMode_0
   \   000009   14           DEC     A
   \   00000A   6010         JZ      ??setLightMode_1
   \   00000C   14           DEC     A
   \   00000D   6011         JZ      ??setLightMode_2
   \   00000F   14           DEC     A
   \   000010   6012         JZ      ??setLightMode_3
   \   000012   8014         SJMP    ??setLightMode_4
    484            case 0: led = HAL_LED_1; break;
   \                     ??setLightMode_0:
   \   000014   7901         MOV     R1,#0x1
    485            case 1: led = HAL_LED_2; break;
    486            case 2: led = HAL_LED_3; break;
    487            case 3: led = HAL_LED_4; break;
    488            default:
    489              printf("invalid lightNumber: %d\n", lightNum);
    490              return;
    491            }
    492                  
    493            HalLedSet ( led, mode);
   \                     ??setLightMode_5:
   \   000016                ; Setup parameters for call to function HalLedSet
   \   000016   12....       LCALL   ??HalLedSet?relay
    494          }
   \                     ??setLightMode_6:
   \   000019   02....       LJMP    ??Subroutine25_0 & 0xFFFF
   \                     ??setLightMode_1:
   \   00001C   7902         MOV     R1,#0x2
   \   00001E   80F6         SJMP    ??setLightMode_5
   \                     ??setLightMode_2:
   \   000020   7904         MOV     R1,#0x4
   \   000022   80F2         SJMP    ??setLightMode_5
   \                     ??setLightMode_3:
   \   000024   7908         MOV     R1,#0x8
   \   000026   80EE         SJMP    ??setLightMode_5
   \                     ??setLightMode_4:
   \   000028                ; Setup parameters for call to function printf
   \   000028   8F..         MOV     ?V0 + 0,R7
   \   00002A   75..00       MOV     ?V0 + 1,#0x0
   \   00002D   78..         MOV     R0,#?V0 + 0
   \   00002F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000032   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_56:
   \   000035   12....       LCALL   ?DEALLOC_XSTACK8
   \   000038   80DF         SJMP    ??setLightMode_6

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   7A..         MOV     R2,#`?<Constant "invalid lightNumber: %d\\n">` & 0xff
   \   000002   7B..         MOV     R3,#(`?<Constant "invalid lightNumber: %d\\n">` >> 8) & 0xff
   \   000004                REQUIRE ??Subroutine23_0
   \   000004                ; // Fall through to label ??Subroutine23_0
    495          
    496          char* getLightStatus(uint8 lightNum);
    497          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    498          char* getLightStatus(uint8 lightNum)
   \                     getLightStatus:
    499          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 0
    500            uint8 led = 0;
    501            switch(lightNum) {
   \   000005   E9           MOV     A,R1
   \   000006   600B         JZ      ??getLightStatus_0
   \   000008   14           DEC     A
   \   000009   6019         JZ      ??getLightStatus_1
   \   00000B   14           DEC     A
   \   00000C   601B         JZ      ??getLightStatus_2
   \   00000E   14           DEC     A
   \   00000F   601D         JZ      ??getLightStatus_3
   \   000011   8020         SJMP    ??getLightStatus_4
    502            case 0: led = HAL_LED_1; break;
   \                     ??getLightStatus_0:
   \   000013   75..01       MOV     ?V0 + 0,#0x1
    503            case 1: led = HAL_LED_2; break;
    504            case 2: led = HAL_LED_3; break;
    505            case 3: led = HAL_LED_4; break;
    506            default:
    507              printf("invalid lightNumber: %d\n", lightNum);
    508              return "Off";
    509            }
    510            
    511            if (HalLedGetState() & led) {
   \                     ??getLightStatus_5:
   \   000016                ; Setup parameters for call to function HalLedGetState
   \   000016   12....       LCALL   ??HalLedGetState?relay
   \   000019   E9           MOV     A,R1
   \   00001A   55..         ANL     A,?V0 + 0
   \   00001C   6025         JZ      ??getLightStatus_6
    512              return "On";
   \   00001E   7A..         MOV     R2,#`?<Constant "On">` & 0xff
   \   000020   7B..         MOV     R3,#(`?<Constant "On">` >> 8) & 0xff
   \   000022   8023         SJMP    ??getLightStatus_7
    513            } else {
   \                     ??getLightStatus_1:
   \   000024   75..02       MOV     ?V0 + 0,#0x2
   \   000027   80ED         SJMP    ??getLightStatus_5
   \                     ??getLightStatus_2:
   \   000029   75..04       MOV     ?V0 + 0,#0x4
   \   00002C   80E8         SJMP    ??getLightStatus_5
   \                     ??getLightStatus_3:
   \   00002E   75..08       MOV     ?V0 + 0,#0x8
   \   000031   80E3         SJMP    ??getLightStatus_5
   \                     ??getLightStatus_4:
   \   000033                ; Setup parameters for call to function printf
   \   000033   89..         MOV     ?V0 + 0,R1
   \   000035   75..00       MOV     ?V0 + 1,#0x0
   \   000038   78..         MOV     R0,#?V0 + 0
   \   00003A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00003D   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_57:
   \   000040   12....       LCALL   ?DEALLOC_XSTACK8
    514              return "Off";
   \                     ??getLightStatus_6:
   \   000043   7A..         MOV     R2,#`?<Constant "Off">` & 0xff
   \   000045   7B..         MOV     R3,#(`?<Constant "Off">` >> 8) & 0xff
   \                     ??getLightStatus_7:
   \   000047   7F03         MOV     R7,#0x3
   \   000049   02....       LJMP    ?BANKED_LEAVE_XDATA
    515            }
    516             
    517          }
    518          
    519          void processLightCmd(afIncomingMSGPacket_t *pkt, char* cmd, uint8 mode);
    520          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   12....       LCALL   ??processLightCmd?relay
   \   000003                REQUIRE ??Subroutine19_0
   \   000003                ; // Fall through to label ??Subroutine19_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    521          void processLightToggle(afIncomingMSGPacket_t *pkt)
   \                     processLightToggle:
    522          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    523            processLightCmd(pkt, "LightToggle", HAL_LED_MODE_TOGGLE);
   \   000004                ; Setup parameters for call to function processLightCmd
   \   000004   7908         MOV     R1,#0x8
   \   000006   7C..         MOV     R4,#`?<Constant "LightToggle">` & 0xff
   \   000008   7D..         MOV     R5,#(`?<Constant "LightToggle">` >> 8) & 0xff
   \   00000A   02....       LJMP    ?Subroutine1 & 0xFFFF
    524          }
    525          
    526          void processLightOn(afIncomingMSGPacket_t *pkt)
    527          {
    528            processLightCmd(pkt, "LightOn", HAL_LED_MODE_ON);
    529          }
    530          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    531          void processLightOff(afIncomingMSGPacket_t *pkt)
   \                     processLightOff:
    532          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    533            processLightCmd(pkt, "LightOff", HAL_LED_MODE_OFF);
   \   000004                ; Setup parameters for call to function processLightCmd
   \   000004   7900         MOV     R1,#0x0
   \   000006   7C..         MOV     R4,#`?<Constant "LightOff">` & 0xff
   \   000008   7D..         MOV     R5,#(`?<Constant "LightOff">` >> 8) & 0xff
   \   00000A   02....       LJMP    ?Subroutine1 & 0xFFFF
    534          }
    535          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    536          void processLightStatus(afIncomingMSGPacket_t *pkt)
   \                     processLightStatus:
    537          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    538            processLightCmd(pkt, "LightStatus", 0);
   \   000004                ; Setup parameters for call to function processLightCmd
   \   000004   7900         MOV     R1,#0x0
   \   000006   7C..         MOV     R4,#`?<Constant "LightStatus">` & 0xff
   \   000008   7D..         MOV     R5,#(`?<Constant "LightStatus">` >> 8) & 0xff
   \   00000A   02....       LJMP    ?Subroutine1 & 0xFFFF
    539          }
    540          
    541          void processLightOffLater(afIncomingMSGPacket_t *pkt)
    542          {
    543            processLightCmd(pkt, "LightOffLater", 0);  
    544          }
    545          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    546          void processLightCmd(afIncomingMSGPacket_t *pkt, char* cmd, uint8 mode)
   \                     processLightCmd:
    547          {  
   \   000000   74EC         MOV     A,#-0x14
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 20
   \   000005                ; Auto size: 60
   \   000005   74C4         MOV     A,#-0x3c
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
   \   00000E   8C..         MOV     ?V0 + 0,R4
   \   000010   8D..         MOV     ?V0 + 1,R5
   \   000012   89..         MOV     ?V0 + 7,R1
    548            uint8* cmdData = pkt->cmd.Data;
   \   000014   EE           MOV     A,R6
   \   000015   2421         ADD     A,#0x21
   \   000017   F582         MOV     DPL,A
   \   000019   EF           MOV     A,R7
   \   00001A   3400         ADDC    A,#0x0
   \   00001C   F583         MOV     DPH,A
   \   00001E   E0           MOVX    A,@DPTR
   \   00001F   F5..         MOV     ?V0 + 2,A
   \   000021   A3           INC     DPTR
   \   000022   E0           MOVX    A,@DPTR
   \   000023   F5..         MOV     ?V0 + 3,A
    549            if (osal_strlen((char*)cmdData) < osal_strlen(cmd) + 2) {// cmd lightNumber
   \   000025                ; Setup parameters for call to function osal_strlen
   \   000025   AA..         MOV     R2,?V0 + 2
   \   000027   FB           MOV     R3,A
   \   000028   12....       LCALL   ??osal_strlen?relay
   \   00002B   8A..         MOV     ?V0 + 4,R2
   \   00002D   8B..         MOV     ?V0 + 5,R3
   \   00002F                ; Setup parameters for call to function osal_strlen
   \   00002F   AA..         MOV     R2,?V0 + 0
   \   000031   AB..         MOV     R3,?V0 + 1
   \   000033   12....       LCALL   ??osal_strlen?relay
   \   000036   EA           MOV     A,R2
   \   000037   2402         ADD     A,#0x2
   \   000039   F8           MOV     R0,A
   \   00003A   EB           MOV     A,R3
   \   00003B   3400         ADDC    A,#0x0
   \   00003D   F9           MOV     R1,A
   \   00003E   C3           CLR     C
   \   00003F   E5..         MOV     A,?V0 + 4
   \   000041   98           SUBB    A,R0
   \   000042   E5..         MOV     A,?V0 + 5
   \   000044   99           SUBB    A,R1
   \   000045   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000047   65D0         XRL     A,PSW
   \   000049   33           RLC     A
   \   00004A   5012         JNC     ??processLightCmd_0
    550              printf("invalid request: %s\n", cmdData);
   \                     ??processLightCmd_1:
   \   00004C                ; Setup parameters for call to function printf
   \   00004C   78..         MOV     R0,#?V0 + 2
   \   00004E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000051   7A..         MOV     R2,#`?<Constant "invalid request: %s\\n">` & 0xff
   \   000053   7B..         MOV     R3,#(`?<Constant "invalid request: %s\\n">` >> 8) & 0xff
   \   000055   12....       LCALL   ??Subroutine23_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_60:
   \   000058   12....       LCALL   ?DEALLOC_XSTACK8
    551              return;
   \   00005B   02....       LJMP    ??processLightCmd_2 & 0xFFFF
    552            }
    553            
    554            uint8 lightNum = cmdData[osal_strlen(cmd) + 1] - '0';
   \                     ??processLightCmd_0:
   \   00005E                ; Setup parameters for call to function osal_strlen
   \   00005E   AA..         MOV     R2,?V0 + 0
   \   000060   AB..         MOV     R3,?V0 + 1
   \   000062   12....       LCALL   ??osal_strlen?relay
   \   000065   8A..         MOV     ?V0 + 4,R2
   \   000067   8B..         MOV     ?V0 + 5,R3
   \   000069   E5..         MOV     A,?V0 + 2
   \   00006B   25..         ADD     A,?V0 + 4
   \   00006D   F582         MOV     DPL,A
   \   00006F   E5..         MOV     A,?V0 + 3
   \   000071   35..         ADDC    A,?V0 + 5
   \   000073   F583         MOV     DPH,A
   \   000075   A3           INC     DPTR
   \   000076   E0           MOVX    A,@DPTR
   \   000077   24D0         ADD     A,#-0x30
   \   000079   F5..         MOV     ?V0 + 6,A
    555            if (lightNum < 0 || lightNum >= LIGHT_NUM) {
                                ^
Warning[Pe186]: pointless comparison of unsigned integer with zero
   \   00007B   C3           CLR     C
   \   00007C   9404         SUBB    A,#0x4
   \   00007E   50CC         JNC     ??processLightCmd_1
    556              printf("invalid request: %s\n", cmdData);
    557              return;
    558            }
    559            
    560            
    561            char buf[48];
    562            
    563            uint16 shortAddr = NLME_GetShortAddr();
   \   000080                ; Setup parameters for call to function NLME_GetShortAddr
   \   000080   12....       LCALL   ??NLME_GetShortAddr?relay
   \   000083   8A..         MOV     ?V0 + 4,R2
   \   000085   8B..         MOV     ?V0 + 5,R3
    564            afAddrType_t P2P_DstAddr;
    565            P2P_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \   000087   7408         MOV     A,#0x8
   \   000089   12....       LCALL   ?XSTACK_DISP0_8
   \   00008C   7402         MOV     A,#0x2
   \   00008E   F0           MOVX    @DPTR,A
    566            P2P_DstAddr.endPoint = GENERICAPP_ENDPOINT;
   \   00008F   7409         MOV     A,#0x9
   \   000091   12....       LCALL   ?XSTACK_DISP0_8
   \   000094   12....       LCALL   ?Subroutine2 & 0xFFFF
    567            P2P_DstAddr.addr.shortAddr = pkt->srcAddr.addr.shortAddr;
    568            
    569            
    570            
    571            if (strEqual((char*)cmd, "LightStatus")) {
   \                     ??CrossCallReturnLabel_0:
   \   000097   85..82       MOV     DPL,?V0 + 6
   \   00009A   8582..       MOV     ?V0 + 8,DPL
   \   00009D   75..00       MOV     ?V0 + 9,#0x0
   \   0000A0                ; Setup parameters for call to function strEqual
   \   0000A0   7C..         MOV     R4,#`?<Constant "LightStatus">` & 0xff
   \   0000A2   7D..         MOV     R5,#(`?<Constant "LightStatus">` >> 8) & 0xff
   \   0000A4   AA..         MOV     R2,?V0 + 0
   \   0000A6   AB..         MOV     R3,?V0 + 1
   \   0000A8   12....       LCALL   ??Subroutine21_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_37:
   \   0000AB   603A         JZ      ??processLightCmd_3
    572              sprintf(buf, "%sResp %d %s %04X %s", cmd, lightNum, getLightStatus(lightNum), shortAddr, getMyName());
   \   0000AD                ; Setup parameters for call to function getMyName
   \   0000AD   12....       LCALL   ?Subroutine12 & 0xFFFF
    573            } else if (strEqual((char*)cmd, "LightOffLater")) {
   \                     ??CrossCallReturnLabel_16:
   \   0000B0   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000B3   78..         MOV     R0,#?V0 + 4
   \   0000B5   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000B8                ; Setup parameters for call to function getLightStatus
   \   0000B8   A9..         MOV     R1,?V0 + 6
   \   0000BA   12....       LCALL   ??getLightStatus?relay
   \   0000BD   8A..         MOV     ?V0 + 2,R2
   \   0000BF   8B..         MOV     ?V0 + 3,R3
   \   0000C1   78..         MOV     R0,#?V0 + 2
   \   0000C3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000C6   78..         MOV     R0,#?V0 + 8
   \   0000C8   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000CB   78..         MOV     R0,#?V0 + 0
   \   0000CD   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000D0   7C..         MOV     R4,#`?<Constant "%sResp %d %s %04X %s">` & 0xff
   \   0000D2   7D..         MOV     R5,#(`?<Constant "%sResp %d %s %04X %s">` >> 8) & 0xff
   \   0000D4   7416         MOV     A,#0x16
   \   0000D6   12....       LCALL   ?XSTACK_DISP0_8
   \   0000D9   AA82         MOV     R2,DPL
   \   0000DB   AB83         MOV     R3,DPH
   \   0000DD   12....       LCALL   ??sprintf?relay
   \   0000E0   740A         MOV     A,#0xa
   \   0000E2   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000E5   807B         SJMP    ??processLightCmd_4
   \                     ??processLightCmd_3:
   \   0000E7                ; Setup parameters for call to function strEqual
   \   0000E7   7C..         MOV     R4,#`?<Constant "LightOffLater">` & 0xff
   \   0000E9   7D..         MOV     R5,#(`?<Constant "LightOffLater">` >> 8) & 0xff
   \   0000EB   AA..         MOV     R2,?V0 + 0
   \   0000ED   AB..         MOV     R3,?V0 + 1
   \   0000EF   12....       LCALL   ??Subroutine21_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_38:
   \   0000F2   603F         JZ      ??processLightCmd_5
    574              
    575              uint16 delayTime = 0;
    576              delayTime = strToDec(cmdData + osal_strlen("LightOffLater 1 "));
   \   0000F4                ; Setup parameters for call to function strToDec
   \   0000F4                ; Setup parameters for call to function osal_strlen
   \   0000F4   7A..         MOV     R2,#`?<Constant "LightOffLater 1 ">` & 0xff
   \   0000F6   7B..         MOV     R3,#(`?<Constant "LightOffLater 1 ">` >> 8) & 0xff
   \   0000F8   12....       LCALL   ??osal_strlen?relay
   \   0000FB   8A..         MOV     ?V0 + 10,R2
   \   0000FD   8B..         MOV     ?V0 + 11,R3
   \   0000FF   E5..         MOV     A,?V0 + 2
   \   000101   25..         ADD     A,?V0 + 10
   \   000103   FA           MOV     R2,A
   \   000104   E5..         MOV     A,?V0 + 3
   \   000106   35..         ADDC    A,?V0 + 11
   \   000108   FB           MOV     R3,A
   \   000109   12....       LCALL   ??strToDec?relay
   \   00010C   8A..         MOV     ?V0 + 2,R2
   \   00010E   8B..         MOV     ?V0 + 3,R3
    577              
    578              resetCurrentTime(lightNum);
   \   000110                ; Setup parameters for call to function resetCurrentTime
   \   000110   A9..         MOV     R1,?V0 + 6
   \   000112   12....       LCALL   ??resetCurrentTime?relay
    579            
    580              lightOffTimeValue[lightNum] = currentTime[lightNum] + delayTime;
   \   000115   E5..         MOV     A,?V0 + 8
   \   000117   C3           CLR     C
   \   000118   33           RLC     A
   \   000119   F8           MOV     R0,A
   \   00011A   E4           CLR     A
   \   00011B   33           RLC     A
   \   00011C   F9           MOV     R1,A
   \   00011D   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_13:
   \   000120   E0           MOVX    A,@DPTR
   \   000121   25..         ADD     A,?V0 + 2
   \   000123   FA           MOV     R2,A
   \   000124   A3           INC     DPTR
   \   000125   E0           MOVX    A,@DPTR
   \   000126   35..         ADDC    A,?V0 + 3
   \   000128   FB           MOV     R3,A
   \   000129   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_6:
   \   00012C   EA           MOV     A,R2
   \   00012D   F0           MOVX    @DPTR,A
   \   00012E   A3           INC     DPTR
   \   00012F   EB           MOV     A,R3
   \   000130   F0           MOVX    @DPTR,A
    581            
    582             // printf("delayTime %d, LightOffTimeValue: %d, currentTime=%d, lightNum=%d\n", delayTime, lightOffTimeValue, currentTime, lightNum);
    583            
    584              sprintf(buf, "%sResp %d %04X %s", cmd, lightNum, shortAddr, getMyName());
   \   000131                ; Setup parameters for call to function sprintf
   \   000131                ; Setup parameters for call to function getMyName
   \   000131   8005         SJMP    ??CrossCallReturnLabel_19
    585              
    586            } else {
    587              setLightMode(lightNum, mode);
   \                     ??processLightCmd_5:
   \   000133                ; Setup parameters for call to function setLightMode
   \   000133   AA..         MOV     R2,?V0 + 7
   \   000135   12....       LCALL   ?Subroutine13 & 0xFFFF
    588              // disable light auto off
    589              resetCurrentTime(lightNum);
    590              
    591              sprintf(buf, "%sResp %d %04X %s", cmd, lightNum, shortAddr, getMyName());
   \   000138                ; Setup parameters for call to function sprintf
   \   000138                ; Setup parameters for call to function getMyName
    592            }
   \                     ??CrossCallReturnLabel_19:
   \   000138   12....       LCALL   ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_17:
   \   00013B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00013E   78..         MOV     R0,#?V0 + 4
   \   000140   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000143   78..         MOV     R0,#?V0 + 8
   \   000145   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000148   78..         MOV     R0,#?V0 + 0
   \   00014A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00014D   7C..         MOV     R4,#`?<Constant "%sResp %d %04X %s">` & 0xff
   \   00014F   7D..         MOV     R5,#(`?<Constant "%sResp %d %04X %s">` >> 8) & 0xff
   \   000151   7414         MOV     A,#0x14
   \   000153   12....       LCALL   ?XSTACK_DISP0_8
   \   000156   AA82         MOV     R2,DPL
   \   000158   AB83         MOV     R3,DPH
   \   00015A   12....       LCALL   ??sprintf?relay
   \   00015D   7408         MOV     A,#0x8
   \   00015F   12....       LCALL   ?DEALLOC_XSTACK8
    593            
    594            if ( AF_DataRequest( &P2P_DstAddr, &GenericApp_epDesc,
    595                                 GENERICAPP_CLUSTERID,
    596                                 osal_strlen(buf)+1,
    597                                 (uint8*)buf,
    598                                 &GenericApp_TransID,
    599                                 AF_DISCV_ROUTE, AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \                     ??processLightCmd_4:
   \   000162                ; Setup parameters for call to function AF_DataRequest
   \   000162   75..1E       MOV     ?V0 + 2,#0x1e
   \   000165   78..         MOV     R0,#?V0 + 2
   \   000167   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00016A   75....       MOV     ?V0 + 2,#GenericApp_TransID & 0xff
   \   00016D   75....       MOV     ?V0 + 3,#(GenericApp_TransID >> 8) & 0xff
   \   000170   78..         MOV     R0,#?V0 + 2
   \   000172   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000175   740F         MOV     A,#0xf
   \   000177   12....       LCALL   ?XSTACK_DISP0_8
   \   00017A   8582..       MOV     ?V0 + 2,DPL
   \   00017D   8583..       MOV     ?V0 + 3,DPH
   \   000180   78..         MOV     R0,#?V0 + 2
   \   000182   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000185                ; Setup parameters for call to function osal_strlen
   \   000185   7411         MOV     A,#0x11
   \   000187   12....       LCALL   ?XSTACK_DISP0_8
   \   00018A   AA82         MOV     R2,DPL
   \   00018C   AB83         MOV     R3,DPH
   \   00018E   12....       LCALL   ??osal_strlen?relay
   \   000191   EA           MOV     A,R2
   \   000192   2401         ADD     A,#0x1
   \   000194   F5..         MOV     ?V0 + 2,A
   \   000196   EB           MOV     A,R3
   \   000197   3400         ADDC    A,#0x0
   \   000199   F5..         MOV     ?V0 + 3,A
   \   00019B   78..         MOV     R0,#?V0 + 2
   \   00019D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001A0   75..01       MOV     ?V0 + 2,#0x1
   \   0001A3   75..00       MOV     ?V0 + 3,#0x0
   \   0001A6   78..         MOV     R0,#?V0 + 2
   \   0001A8   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001AB   7920         MOV     R1,#0x20
   \   0001AD   7C..         MOV     R4,#GenericApp_epDesc & 0xff
   \   0001AF   7D..         MOV     R5,#(GenericApp_epDesc >> 8) & 0xff
   \   0001B1   7409         MOV     A,#0x9
   \   0001B3   12....       LCALL   ?XSTACK_DISP0_8
   \   0001B6   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_20:
   \   0001B9   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001BC   E9           MOV     A,R1
   \   0001BD   6026         JZ      ??processLightCmd_2
    600            {
    601              // Successfully requested to be sent.
    602            }
    603            else
    604            {
    605              printf("send %sResp %d error %s\n", cmd, lightNum, buf);
   \   0001BF                ; Setup parameters for call to function printf
   \   0001BF   740C         MOV     A,#0xc
   \   0001C1   12....       LCALL   ?XSTACK_DISP0_8
   \   0001C4   8582..       MOV     ?V0 + 2,DPL
   \   0001C7   8583..       MOV     ?V0 + 3,DPH
   \   0001CA   78..         MOV     R0,#?V0 + 2
   \   0001CC   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001CF   78..         MOV     R0,#?V0 + 8
   \   0001D1   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001D4   78..         MOV     R0,#?V0 + 0
   \   0001D6   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001D9   7A..         MOV     R2,#`?<Constant "send %sResp %d error %s\\n">` & 0xff
   \   0001DB   7B..         MOV     R3,#(`?<Constant "send %sResp %d error %s\\n">` >> 8) & 0xff
   \   0001DD   12....       LCALL   ??printf?relay
   \   0001E0   7406         MOV     A,#0x6
   \   0001E2   12....       LCALL   ?DEALLOC_XSTACK8
   \                     ??processLightCmd_2:
   \   0001E5   743C         MOV     A,#0x3c
   \   0001E7   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001EA   7F0C         MOV     R7,#0xc
   \   0001EC   02....       LJMP    ?BANKED_LEAVE_XDATA
    606            }
    607            
    608          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   12....       LCALL   ??getMyName?relay
   \   000003   8A..         MOV     ?V0 + 2,R2
   \   000005   8B..         MOV     ?V0 + 3,R3
   \   000007                ; Setup parameters for call to function sprintf
   \   000007   78..         MOV     R0,#?V0 + 2
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   740A         MOV     A,#0xa
   \   000002   F0           MOVX    @DPTR,A
   \   000003   8E82         MOV     DPL,R6
   \   000005   8F83         MOV     DPH,R7
   \   000007   A3           INC     DPTR
   \   000008   A3           INC     DPTR
   \   000009   A3           INC     DPTR
   \   00000A   A3           INC     DPTR
   \   00000B   A3           INC     DPTR
   \   00000C   A3           INC     DPTR
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   F8           MOV     R0,A
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   F9           MOV     R1,A
   \   000012   85..82       MOV     DPL,?XSP + 0
   \   000015   85..83       MOV     DPH,?XSP + 1
   \   000018   E8           MOV     A,R0
   \   000019   F0           MOVX    @DPTR,A
   \   00001A   A3           INC     DPTR
   \   00001B   E9           MOV     A,R1
   \   00001C   F0           MOVX    @DPTR,A
   \   00001D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine21_0:
   \   000000   12....       LCALL   ??strEqual?relay
   \   000003   E9           MOV     A,R1
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine16:
   \   000000   AA82         MOV     R2,DPL
   \   000002   AB83         MOV     R3,DPH
   \   000004   12....       LCALL   ??AF_DataRequest?relay
   \   000007   7409         MOV     A,#0x9
   \   000009   22           RET
    609          
    610          
    611          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    612          void processReportNames(afIncomingMSGPacket_t *inMsg)
   \                     processReportNames:
    613          {
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 60
   \   000005   74C4         MOV     A,#-0x3c
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    614            uint16 shortAddr = NLME_GetShortAddr();
   \   00000E                ; Setup parameters for call to function NLME_GetShortAddr
   \   00000E   12....       LCALL   ??NLME_GetShortAddr?relay
   \   000011   8A..         MOV     ?V0 + 0,R2
   \   000013   8B..         MOV     ?V0 + 1,R3
    615            uint16 parentShortAddr = NLME_GetCoordShortAddr();
   \   000015                ; Setup parameters for call to function NLME_GetCoordShortAddr
   \   000015   12....       LCALL   ??NLME_GetCoordShortAddr?relay
   \   000018   8A..         MOV     ?V0 + 2,R2
   \   00001A   8B..         MOV     ?V0 + 3,R3
    616            char buf[48];
    617            int len = sprintf(buf, "ReportNamesResp %s %04X %04X", getMyName(), shortAddr, parentShortAddr);
   \   00001C                ; Setup parameters for call to function sprintf
   \   00001C   78..         MOV     R0,#?V0 + 2
   \   00001E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000021   78..         MOV     R0,#?V0 + 0
   \   000023   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000026                ; Setup parameters for call to function getMyName
   \   000026   12....       LCALL   ?Subroutine11 & 0xFFFF
   \                     ??CrossCallReturnLabel_15:
   \   000029   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00002C   7C..         MOV     R4,#`?<Constant "ReportNamesResp %s %0...">` & 0xff
   \   00002E   7D..         MOV     R5,#(`?<Constant "ReportNamesResp %s %0...">` >> 8) & 0xff
   \   000030   7412         MOV     A,#0x12
   \   000032   12....       LCALL   ?XSTACK_DISP0_8
   \   000035   AA82         MOV     R2,DPL
   \   000037   AB83         MOV     R3,DPH
   \   000039   12....       LCALL   ??sprintf?relay
   \   00003C   7406         MOV     A,#0x6
   \   00003E   12....       LCALL   ?DEALLOC_XSTACK8
    618            
    619            afAddrType_t P2P_DstAddr;
    620            P2P_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \   000041   7408         MOV     A,#0x8
   \   000043   12....       LCALL   ?XSTACK_DISP0_8
   \   000046   7402         MOV     A,#0x2
   \   000048   F0           MOVX    @DPTR,A
    621            P2P_DstAddr.endPoint = GENERICAPP_ENDPOINT;
   \   000049   7409         MOV     A,#0x9
   \   00004B   12....       LCALL   ?XSTACK_DISP0_8
   \   00004E   12....       LCALL   ?Subroutine2 & 0xFFFF
    622            P2P_DstAddr.addr.shortAddr = inMsg->srcAddr.addr.shortAddr;
    623            
    624              
    625            if ( AF_DataRequest( &P2P_DstAddr, &GenericApp_epDesc,
    626                                 GENERICAPP_CLUSTERID,
    627                                 osal_strlen(buf)+1,
    628                                 (uint8*)buf,
    629                                 &GenericApp_TransID,
    630                                 AF_DISCV_ROUTE, AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \                     ??CrossCallReturnLabel_1:
   \   000051                ; Setup parameters for call to function AF_DataRequest
   \   000051   75..1E       MOV     ?V0 + 0,#0x1e
   \   000054   78..         MOV     R0,#?V0 + 0
   \   000056   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000059   75....       MOV     ?V0 + 0,#GenericApp_TransID & 0xff
   \   00005C   75....       MOV     ?V0 + 1,#(GenericApp_TransID >> 8) & 0xff
   \   00005F   78..         MOV     R0,#?V0 + 0
   \   000061   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000064   740F         MOV     A,#0xf
   \   000066   12....       LCALL   ?XSTACK_DISP0_8
   \   000069   8582..       MOV     ?V0 + 0,DPL
   \   00006C   8583..       MOV     ?V0 + 1,DPH
   \   00006F   78..         MOV     R0,#?V0 + 0
   \   000071   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000074                ; Setup parameters for call to function osal_strlen
   \   000074   7411         MOV     A,#0x11
   \   000076   12....       LCALL   ?XSTACK_DISP0_8
   \   000079   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_31:
   \   00007C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00007F   75..01       MOV     ?V0 + 0,#0x1
   \   000082   75..00       MOV     ?V0 + 1,#0x0
   \   000085   78..         MOV     R0,#?V0 + 0
   \   000087   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00008A   7920         MOV     R1,#0x20
   \   00008C   7C..         MOV     R4,#GenericApp_epDesc & 0xff
   \   00008E   7D..         MOV     R5,#(GenericApp_epDesc >> 8) & 0xff
   \   000090   7409         MOV     A,#0x9
   \   000092   12....       LCALL   ?XSTACK_DISP0_8
   \   000095   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_21:
   \   000098   12....       LCALL   ?DEALLOC_XSTACK8
   \   00009B   E9           MOV     A,R1
   \   00009C   601A         JZ      ??processReportNames_0
    631            {
    632              // Successfully requested to be sent.
    633            }
    634            else
    635            {
    636              printf("send ReportNamesResp error %s\n", buf);
   \   00009E                ; Setup parameters for call to function printf
   \   00009E   740C         MOV     A,#0xc
   \   0000A0   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A3   8582..       MOV     ?V0 + 0,DPL
   \   0000A6   8583..       MOV     ?V0 + 1,DPH
   \   0000A9   78..         MOV     R0,#?V0 + 0
   \   0000AB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000AE   7A..         MOV     R2,#`?<Constant "send ReportNamesResp ...">` & 0xff
   \   0000B0   7B..         MOV     R3,#(`?<Constant "send ReportNamesResp ...">` >> 8) & 0xff
   \   0000B2   12....       LCALL   ??Subroutine23_0 & 0xFFFF
    637            }
   \                     ??CrossCallReturnLabel_61:
   \   0000B5   12....       LCALL   ?DEALLOC_XSTACK8
    638            
    639          }
   \                     ??processReportNames_0:
   \   0000B8   743C         MOV     A,#0x3c
   \   0000BA   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000BD   7F06         MOV     R7,#0x6
   \   0000BF   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   AA82         MOV     R2,DPL
   \   000002   AB83         MOV     R3,DPH
   \   000004                REQUIRE ??Subroutine20_0
   \   000004                ; // Fall through to label ??Subroutine20_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine20_0:
   \   000000   12....       LCALL   ??osal_strlen?relay
   \   000003   EA           MOV     A,R2
   \   000004   2401         ADD     A,#0x1
   \   000006   F5..         MOV     ?V0 + 0,A
   \   000008   EB           MOV     A,R3
   \   000009   3400         ADDC    A,#0x0
   \   00000B   F5..         MOV     ?V0 + 1,A
   \   00000D   78..         MOV     R0,#?V0 + 0
   \   00000F   22           RET
    640          /*********************************************************************
    641           * Event Generation Functions
    642           */
    643          
    644          /*********************************************************************
    645           * @fn      GenericApp_ProcessZDOMsgs()
    646           *
    647           * @brief   Process response messages
    648           *
    649           * @param   none
    650           *
    651           * @return  none
    652           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    653          void GenericApp_ProcessZDOMsgs( zdoIncomingMsg_t *inMsg )
   \                     GenericApp_ProcessZDOMsgs:
    654          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    655            
    656            switch ( inMsg->clusterID )
   \   000005   EA           MOV     A,R2
   \   000006   240C         ADD     A,#0xc
   \   000008   F582         MOV     DPL,A
   \   00000A   EB           MOV     A,R3
   \   00000B   3400         ADDC    A,#0x0
   \   00000D   F583         MOV     DPH,A
   \   00000F   E0           MOVX    A,@DPTR
   \   000010   6406         XRL     A,#0x6
   \   000012   7004         JNZ     ??GenericApp_ProcessZDOMsgs_0
   \   000014   A3           INC     DPTR
   \   000015   E0           MOVX    A,@DPTR
   \   000016   6480         XRL     A,#0x80
   \                     ??GenericApp_ProcessZDOMsgs_0:
   \   000018   703C         JNZ     ??GenericApp_ProcessZDOMsgs_1
    657            {
    658              case End_Device_Bind_rsp:
    659                if ( ZDO_ParseBindRsp( inMsg ) == ZSuccess )
    660                {
    661                  // Light LED
    662          //        HalLedSet( HAL_LED_4, HAL_LED_MODE_ON );
    663                }
    664          #if defined(BLINK_LEDS)
    665                else
    666                {
    667                  // Flash LED to show failure
    668           //       HalLedSet ( HAL_LED_4, HAL_LED_MODE_FLASH );
    669                }
    670          #endif
    671                break;
    672          
    673              case Match_Desc_rsp:
    674                {
    675                  ZDO_ActiveEndpointRsp_t *pRsp = ZDO_ParseEPListRsp( inMsg );
   \   00001A                ; Setup parameters for call to function ZDO_ParseEPListRsp
   \   00001A   12....       LCALL   ??ZDO_ParseEPListRsp?relay
    676                  if ( pRsp )
   \   00001D   EA           MOV     A,R2
   \   00001E   4B           ORL     A,R3
   \   00001F   6035         JZ      ??GenericApp_ProcessZDOMsgs_1
    677                  {
    678                    if ( pRsp->status == ZSuccess && pRsp->cnt )
   \   000021   8A82         MOV     DPL,R2
   \   000023   8B83         MOV     DPH,R3
   \   000025   E0           MOVX    A,@DPTR
   \   000026   702B         JNZ     ??GenericApp_ProcessZDOMsgs_2
   \   000028   A3           INC     DPTR
   \   000029   A3           INC     DPTR
   \   00002A   A3           INC     DPTR
   \   00002B   E0           MOVX    A,@DPTR
   \   00002C   6025         JZ      ??GenericApp_ProcessZDOMsgs_2
    679                    {
    680                      GenericApp_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \   00002E   90....       MOV     DPTR,#GenericApp_DstAddr + 8
   \   000031   7402         MOV     A,#0x2
   \   000033   F0           MOVX    @DPTR,A
    681                      GenericApp_DstAddr.addr.shortAddr = pRsp->nwkAddr;
   \   000034   8A82         MOV     DPL,R2
   \   000036   8B83         MOV     DPH,R3
   \   000038   A3           INC     DPTR
   \   000039   E0           MOVX    A,@DPTR
   \   00003A   F8           MOV     R0,A
   \   00003B   A3           INC     DPTR
   \   00003C   E0           MOVX    A,@DPTR
   \   00003D   F9           MOV     R1,A
   \   00003E   90....       MOV     DPTR,#GenericApp_DstAddr
   \   000041   E8           MOV     A,R0
   \   000042   F0           MOVX    @DPTR,A
   \   000043   A3           INC     DPTR
   \   000044   E9           MOV     A,R1
   \   000045   F0           MOVX    @DPTR,A
    682                      // Take the first endpoint, Can be changed to search through endpoints
    683                      GenericApp_DstAddr.endPoint = pRsp->epList[0];
   \   000046   8A82         MOV     DPL,R2
   \   000048   8B83         MOV     DPH,R3
   \   00004A   A3           INC     DPTR
   \   00004B   A3           INC     DPTR
   \   00004C   A3           INC     DPTR
   \   00004D   A3           INC     DPTR
   \   00004E   E0           MOVX    A,@DPTR
   \   00004F   90....       MOV     DPTR,#GenericApp_DstAddr + 9
   \   000052   F0           MOVX    @DPTR,A
    684          
    685                      // Light LED
    686          //            HalLedSet( HAL_LED_4, HAL_LED_MODE_ON );
    687                    }
    688                    osal_mem_free( pRsp );
   \                     ??GenericApp_ProcessZDOMsgs_2:
   \   000053                ; Setup parameters for call to function osal_mem_free
   \   000053   12....       LCALL   ??osal_mem_free?relay
    689                  }
    690                }
    691                break;
    692            }
    693          }
   \                     ??GenericApp_ProcessZDOMsgs_1:
   \   000056   02....       LJMP    ??Subroutine25_0 & 0xFFFF
    694          
    695          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    696          void turnOffLightLater(uint16 addr, uint8 lightNum)
   \                     turnOffLightLater:
    697          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 48
   \   000005   74D0         MOV     A,#-0x30
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
   \   00000B   FE           MOV     R6,A
    698            char buf[48];
    699            sprintf(buf, "%04X LightOffLater %d 60", addr, lightNum);
   \   00000C                ; Setup parameters for call to function sprintf
   \   00000C   8E..         MOV     ?V0 + 0,R6
   \   00000E   75..00       MOV     ?V0 + 1,#0x0
   \   000011   78..         MOV     R0,#?V0 + 0
   \   000013   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000016   8A..         MOV     ?V0 + 0,R2
   \   000018   8B..         MOV     ?V0 + 1,R3
   \   00001A   78..         MOV     R0,#?V0 + 0
   \   00001C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00001F   7C..         MOV     R4,#`?<Constant "%04X LightOffLater %d 60">` & 0xff
   \   000021   7D..         MOV     R5,#(`?<Constant "%04X LightOffLater %d 60">` >> 8) & 0xff
   \   000023   02....       LJMP    ?Subroutine0 & 0xFFFF
    700            sendSendCmdMsg((uint8*)buf);
    701          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   7404         MOV     A,#0x4
   \   000002   12....       LCALL   ?XSTACK_DISP0_8
   \   000005   AA82         MOV     R2,DPL
   \   000007   AB83         MOV     R3,DPH
   \   000009   12....       LCALL   ??sprintf?relay
   \   00000C   7404         MOV     A,#0x4
   \   00000E   12....       LCALL   ?DEALLOC_XSTACK8
   \   000011                ; Setup parameters for call to function sendSendCmdMsg
   \   000011                ; Setup parameters for call to function sendSendCmdMsg
   \   000011                ; Setup parameters for call to function sendSendCmdMsg
   \   000011   85..82       MOV     DPL,?XSP + 0
   \   000014   85..83       MOV     DPH,?XSP + 1
   \   000017   AA82         MOV     R2,DPL
   \   000019   AB83         MOV     R3,DPH
   \   00001B   12....       LCALL   ??sendSendCmdMsg?relay
   \   00001E   7430         MOV     A,#0x30
   \   000020                REQUIRE ??Subroutine24_0
   \   000020                ; // Fall through to label ??Subroutine24_0
    702          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    703          void turnOnLight(uint16 addr, uint8 lightNum)
   \                     turnOnLight:
    704          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 48
   \   000005   74D0         MOV     A,#-0x30
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
   \   00000B   FE           MOV     R6,A
    705            char buf[48];
    706            sprintf(buf, "%04X LightOn %d", addr, lightNum);
   \   00000C                ; Setup parameters for call to function sprintf
   \   00000C   8E..         MOV     ?V0 + 0,R6
   \   00000E   75..00       MOV     ?V0 + 1,#0x0
   \   000011   78..         MOV     R0,#?V0 + 0
   \   000013   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000016   8A..         MOV     ?V0 + 0,R2
   \   000018   8B..         MOV     ?V0 + 1,R3
   \   00001A   78..         MOV     R0,#?V0 + 0
   \   00001C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00001F   7C..         MOV     R4,#`?<Constant "%04X LightOn %d">` & 0xff
   \   000021   7D..         MOV     R5,#(`?<Constant "%04X LightOn %d">` >> 8) & 0xff
   \   000023   02....       LJMP    ?Subroutine0 & 0xFFFF
    707            sendSendCmdMsg((uint8*)buf);
    708          }
    709          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    710          void lightToggle(uint16 addr, uint8 lightNum)
   \                     lightToggle:
    711          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 48
   \   000005   74D0         MOV     A,#-0x30
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
   \   00000B   FE           MOV     R6,A
    712            char buf[48];
    713            sprintf(buf, "%04X LightToggle %d", addr, lightNum);
   \   00000C                ; Setup parameters for call to function sprintf
   \   00000C   8E..         MOV     ?V0 + 0,R6
   \   00000E   75..00       MOV     ?V0 + 1,#0x0
   \   000011   78..         MOV     R0,#?V0 + 0
   \   000013   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000016   8A..         MOV     ?V0 + 0,R2
   \   000018   8B..         MOV     ?V0 + 1,R3
   \   00001A   78..         MOV     R0,#?V0 + 0
   \   00001C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00001F   7C..         MOV     R4,#`?<Constant "%04X LightToggle %d">` & 0xff
   \   000021   7D..         MOV     R5,#(`?<Constant "%04X LightToggle %d">` >> 8) & 0xff
   \   000023   02....       LJMP    ?Subroutine0 & 0xFFFF
    714            sendSendCmdMsg((uint8*)buf);
    715          }
    716          
    717          /*********************************************************************
    718           * @fn      GenericApp_HandleKeys
    719           *
    720           * @brief   Handles all key events for this device.
    721           *
    722           * @param   shift - true if in shift/alt.
    723           * @param   keys - bit field for key events. Valid entries:
    724           *                 HAL_KEY_SW_4
    725           *                 HAL_KEY_SW_3
    726           *                 HAL_KEY_SW_2
    727           *                 HAL_KEY_SW_1
    728           *
    729           * @return  none
    730           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    731          void GenericApp_HandleKeys( byte shift, byte keys )
   \                     GenericApp_HandleKeys:
    732          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 0,R2
    733            /*************************** logger ***********************************/
    734            if (keys & HAL_KEY_1_LOW) printf("HandleKeys: HAL_KEY_1_LOW\n");
   \   000007   EA           MOV     A,R2
   \   000008   A2E0         MOV     C,0xE0 /* A   */.0
   \   00000A   5007         JNC     ??GenericApp_HandleKeys_0
   \   00000C                ; Setup parameters for call to function printf
   \   00000C   7A..         MOV     R2,#`?<Constant "HandleKeys: HAL_KEY_1...">` & 0xff
   \   00000E   7B..         MOV     R3,#(`?<Constant "HandleKeys: HAL_KEY_1...">` >> 8) & 0xff
   \   000010   12....       LCALL   ??printf?relay
    735            if (keys & HAL_KEY_2_LOW) printf("HandleKeys: HAL_KEY_2_LOW\n");
   \                     ??GenericApp_HandleKeys_0:
   \   000013   E5..         MOV     A,?V0 + 0
   \   000015   A2E2         MOV     C,0xE0 /* A   */.2
   \   000017   5007         JNC     ??GenericApp_HandleKeys_1
   \   000019                ; Setup parameters for call to function printf
   \   000019   7A..         MOV     R2,#`?<Constant "HandleKeys: HAL_KEY_2...">` & 0xff
   \   00001B   7B..         MOV     R3,#(`?<Constant "HandleKeys: HAL_KEY_2...">` >> 8) & 0xff
   \   00001D   12....       LCALL   ??printf?relay
    736            if (keys & HAL_KEY_3_LOW) printf("HandleKeys: HAL_KEY_3_LOW\n");
   \                     ??GenericApp_HandleKeys_1:
   \   000020   E5..         MOV     A,?V0 + 0
   \   000022   A2E4         MOV     C,0xE0 /* A   */.4
   \   000024   5007         JNC     ??GenericApp_HandleKeys_2
   \   000026                ; Setup parameters for call to function printf
   \   000026   7A..         MOV     R2,#`?<Constant "HandleKeys: HAL_KEY_3...">` & 0xff
   \   000028   7B..         MOV     R3,#(`?<Constant "HandleKeys: HAL_KEY_3...">` >> 8) & 0xff
   \   00002A   12....       LCALL   ??printf?relay
    737            if (keys & HAL_KEY_4_LOW) printf("HandleKeys: HAL_KEY_4_LOW\n");
   \                     ??GenericApp_HandleKeys_2:
   \   00002D   E5..         MOV     A,?V0 + 0
   \   00002F   A2E6         MOV     C,0xE0 /* A   */.6
   \   000031   5007         JNC     ??GenericApp_HandleKeys_3
   \   000033                ; Setup parameters for call to function printf
   \   000033   7A..         MOV     R2,#`?<Constant "HandleKeys: HAL_KEY_4...">` & 0xff
   \   000035   7B..         MOV     R3,#(`?<Constant "HandleKeys: HAL_KEY_4...">` >> 8) & 0xff
   \   000037   12....       LCALL   ??printf?relay
    738            if (keys & HAL_KEY_1_HIGH) printf("HandleKeys: HAL_KEY_1_HIGH\n");
   \                     ??GenericApp_HandleKeys_3:
   \   00003A   E5..         MOV     A,?V0 + 0
   \   00003C   A2E1         MOV     C,0xE0 /* A   */.1
   \   00003E   5007         JNC     ??GenericApp_HandleKeys_4
   \   000040                ; Setup parameters for call to function printf
   \   000040   7A..         MOV     R2,#`?<Constant "HandleKeys: HAL_KEY_1...">_1` & 0xff
   \   000042   7B..         MOV     R3,#(`?<Constant "HandleKeys: HAL_KEY_1...">_1` >> 8) & 0xff
   \   000044   12....       LCALL   ??printf?relay
    739            if (keys & HAL_KEY_2_HIGH) printf("HandleKeys: HAL_KEY_2_HIGH\n");
   \                     ??GenericApp_HandleKeys_4:
   \   000047   E5..         MOV     A,?V0 + 0
   \   000049   A2E3         MOV     C,0xE0 /* A   */.3
   \   00004B   5007         JNC     ??GenericApp_HandleKeys_5
   \   00004D                ; Setup parameters for call to function printf
   \   00004D   7A..         MOV     R2,#`?<Constant "HandleKeys: HAL_KEY_2...">_1` & 0xff
   \   00004F   7B..         MOV     R3,#(`?<Constant "HandleKeys: HAL_KEY_2...">_1` >> 8) & 0xff
   \   000051   12....       LCALL   ??printf?relay
    740            if (keys & HAL_KEY_3_HIGH) printf("HandleKeys: HAL_KEY_3_HIGH\n");
   \                     ??GenericApp_HandleKeys_5:
   \   000054   E5..         MOV     A,?V0 + 0
   \   000056   A2E5         MOV     C,0xE0 /* A   */.5
   \   000058   5007         JNC     ??GenericApp_HandleKeys_6
   \   00005A                ; Setup parameters for call to function printf
   \   00005A   7A..         MOV     R2,#`?<Constant "HandleKeys: HAL_KEY_3...">_1` & 0xff
   \   00005C   7B..         MOV     R3,#(`?<Constant "HandleKeys: HAL_KEY_3...">_1` >> 8) & 0xff
   \   00005E   12....       LCALL   ??printf?relay
    741            if (keys & HAL_KEY_4_HIGH) printf("HandleKeys: HAL_KEY_4_HIGH\n");
   \                     ??GenericApp_HandleKeys_6:
   \   000061   E5..         MOV     A,?V0 + 0
   \   000063   A2E7         MOV     C,0xE0 /* A   */.7
   \   000065   5007         JNC     ??GenericApp_HandleKeys_7
   \   000067                ; Setup parameters for call to function printf
   \   000067   7A..         MOV     R2,#`?<Constant "HandleKeys: HAL_KEY_4...">_1` & 0xff
   \   000069   7B..         MOV     R3,#(`?<Constant "HandleKeys: HAL_KEY_4...">_1` >> 8) & 0xff
   \   00006B   12....       LCALL   ??printf?relay
    742            
    743             
    744           /************************* DoorSensor ***************************/
    745            uint8* myName = (uint8*)getMyName();
   \                     ??GenericApp_HandleKeys_7:
   \   00006E                ; Setup parameters for call to function getMyName
   \   00006E   12....       LCALL   ??getMyName?relay
   \   000071   8A..         MOV     ?V0 + 2,R2
   \   000073   8B..         MOV     ?V0 + 3,R3
   \   000075   AE..         MOV     R6,?V0 + 2
   \   000077   AF..         MOV     R7,?V0 + 3
    746            if (strEqual((char*)myName, "DoorSensor")) {
   \   000079                ; Setup parameters for call to function strEqual
   \   000079   7C..         MOV     R4,#`?<Constant "DoorSensor">` & 0xff
   \   00007B   7D..         MOV     R5,#(`?<Constant "DoorSensor">` >> 8) & 0xff
   \   00007D   12....       LCALL   ??Subroutine21_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_39:
   \   000080   601E         JZ      ??GenericApp_HandleKeys_8
    747              if (keys & HAL_KEY_3_LOW) {
   \   000082   E5..         MOV     A,?V0 + 0
   \   000084   A2E4         MOV     C,0xE0 /* A   */.4
   \   000086   5009         JNC     ??GenericApp_HandleKeys_9
    748                turnOffLightLater(0x046A, 0);
   \   000088                ; Setup parameters for call to function turnOffLightLater
   \   000088   7900         MOV     R1,#0x0
   \   00008A   7A6A         MOV     R2,#0x6a
   \   00008C   7B04         MOV     R3,#0x4
   \   00008E   12....       LCALL   ??turnOffLightLater?relay
    749              }
    750              
    751              if (keys & HAL_KEY_3_HIGH) {
   \                     ??GenericApp_HandleKeys_9:
   \   000091   E5..         MOV     A,?V0 + 0
   \   000093   A2E5         MOV     C,0xE0 /* A   */.5
   \   000095   5009         JNC     ??GenericApp_HandleKeys_8
    752                turnOnLight(0x046A, 0);
   \   000097                ; Setup parameters for call to function turnOnLight
   \   000097   7900         MOV     R1,#0x0
   \   000099   7A6A         MOV     R2,#0x6a
   \   00009B   7B04         MOV     R3,#0x4
   \   00009D   12....       LCALL   ??turnOnLight?relay
    753              }
    754            } // 
    755            
    756          /************************ RestroomSensor ****************************/
    757            if (strEqual((char*)myName, "RestroomSensor")) {
   \                     ??GenericApp_HandleKeys_8:
   \   0000A0                ; Setup parameters for call to function strEqual
   \   0000A0   7C..         MOV     R4,#`?<Constant "RestroomSensor">` & 0xff
   \   0000A2   7D..         MOV     R5,#(`?<Constant "RestroomSensor">` >> 8) & 0xff
   \   0000A4   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_34:
   \   0000A7   601E         JZ      ??GenericApp_HandleKeys_10
    758              if (keys & HAL_KEY_3_LOW) {
   \   0000A9   E5..         MOV     A,?V0 + 0
   \   0000AB   A2E4         MOV     C,0xE0 /* A   */.4
   \   0000AD   5009         JNC     ??GenericApp_HandleKeys_11
    759                turnOnLight(0x2DC0,0);
   \   0000AF                ; Setup parameters for call to function turnOnLight
   \   0000AF   7900         MOV     R1,#0x0
   \   0000B1   7AC0         MOV     R2,#-0x40
   \   0000B3   7B2D         MOV     R3,#0x2d
   \   0000B5   12....       LCALL   ??turnOnLight?relay
    760              }
    761              
    762              if (keys & HAL_KEY_3_HIGH) {
   \                     ??GenericApp_HandleKeys_11:
   \   0000B8   E5..         MOV     A,?V0 + 0
   \   0000BA   A2E5         MOV     C,0xE0 /* A   */.5
   \   0000BC   5009         JNC     ??GenericApp_HandleKeys_10
    763                turnOffLightLater(0x2DC0, 0);
   \   0000BE                ; Setup parameters for call to function turnOffLightLater
   \   0000BE   7900         MOV     R1,#0x0
   \   0000C0   7AC0         MOV     R2,#-0x40
   \   0000C2   7B2D         MOV     R3,#0x2d
   \   0000C4   12....       LCALL   ??turnOffLightLater?relay
    764              }
    765              
    766            } // 
    767          /*********************** MainLight ******************************/
    768            
    769            if (strEqual((char*)myName, "MainLight")) {
   \                     ??GenericApp_HandleKeys_10:
   \   0000C7                ; Setup parameters for call to function strEqual
   \   0000C7   7C..         MOV     R4,#`?<Constant "MainLight">` & 0xff
   \   0000C9   7D..         MOV     R5,#(`?<Constant "MainLight">` >> 8) & 0xff
   \   0000CB   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_35:
   \   0000CE   602D         JZ      ??GenericApp_HandleKeys_12
    770              if (keys & HAL_KEY_1_LOW || keys & HAL_KEY_1_HIGH) {
   \   0000D0   7403         MOV     A,#0x3
   \   0000D2   55..         ANL     A,?V0 + 0
   \   0000D4   6009         JZ      ??GenericApp_HandleKeys_13
    771                lightToggle(0x2DC0, 0);
   \   0000D6                ; Setup parameters for call to function lightToggle
   \   0000D6   7900         MOV     R1,#0x0
   \   0000D8   7AC0         MOV     R2,#-0x40
   \   0000DA   7B2D         MOV     R3,#0x2d
   \   0000DC   12....       LCALL   ??lightToggle?relay
    772              }
    773              
    774              if (keys & HAL_KEY_2_LOW || keys & HAL_KEY_2_HIGH) {
   \                     ??GenericApp_HandleKeys_13:
   \   0000DF   740C         MOV     A,#0xc
   \   0000E1   55..         ANL     A,?V0 + 0
   \   0000E3   6009         JZ      ??GenericApp_HandleKeys_14
    775                lightToggle(0x2DC0, 1);
   \   0000E5                ; Setup parameters for call to function lightToggle
   \   0000E5   7901         MOV     R1,#0x1
   \   0000E7   7AC0         MOV     R2,#-0x40
   \   0000E9   7B2D         MOV     R3,#0x2d
   \   0000EB   12....       LCALL   ??lightToggle?relay
    776              }
    777              
    778              if (keys & HAL_KEY_3_LOW || keys & HAL_KEY_3_HIGH) {
   \                     ??GenericApp_HandleKeys_14:
   \   0000EE   7430         MOV     A,#0x30
   \   0000F0   55..         ANL     A,?V0 + 0
   \   0000F2   6009         JZ      ??GenericApp_HandleKeys_12
    779                lightToggle(0x2DC0, 2);
   \   0000F4                ; Setup parameters for call to function lightToggle
   \   0000F4   7902         MOV     R1,#0x2
   \   0000F6   7AC0         MOV     R2,#-0x40
   \   0000F8   7B2D         MOV     R3,#0x2d
   \   0000FA   12....       LCALL   ??lightToggle?relay
    780              }
    781              
    782            }
    783            /************************ BedLight *******************************/
    784            if (strEqual((char*)myName, "BedLight")) {
   \                     ??GenericApp_HandleKeys_12:
   \   0000FD                ; Setup parameters for call to function strEqual
   \   0000FD   7C..         MOV     R4,#`?<Constant "BedLight">` & 0xff
   \   0000FF   7D..         MOV     R5,#(`?<Constant "BedLight">` >> 8) & 0xff
   \   000101   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_36:
   \   000104   600B         JZ      ??GenericApp_HandleKeys_15
    785              if (keys & HAL_KEY_1_LOW) {
   \   000106   E5..         MOV     A,?V0 + 0
   \   000108   A2E0         MOV     C,0xE0 /* A   */.0
   \   00010A   5005         JNC     ??GenericApp_HandleKeys_15
    786                
    787                SysPowerMode(3);
   \   00010C                ; Setup parameters for call to function SysPowerMode
   \   00010C   7903         MOV     R1,#0x3
   \   00010E   12....       LCALL   ??SysPowerMode?relay
    788              }
    789              
    790              
    791            }
    792          
    793          }
   \                     ??GenericApp_HandleKeys_15:
   \   000111   7F04         MOV     R7,#0x4
   \   000113   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   EE           MOV     A,R6
   \   000001   FA           MOV     R2,A
   \   000002   EF           MOV     A,R7
   \   000003   FB           MOV     R3,A
   \   000004                REQUIRE ??Subroutine21_0
   \   000004                ; // Fall through to label ??Subroutine21_0
    794          
    795          /*********************************************************************
    796           * LOCAL FUNCTIONS
    797           */
    798          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    799          static uint8 strStartWith(uint8* str1, uint8* str2)
   \                     strStartWith:
    800          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   \   000004   800E         SJMP    ??strStartWith_0
    801            while (*str2) {
    802              if (*str1 != *str2) {
    803                return 0;
    804              }
    805              str1++;
   \                     ??strStartWith_1:
   \   000006   A3           INC     DPTR
   \   000007   AA82         MOV     R2,DPL
   \   000009   AB83         MOV     R3,DPH
    806              str2++;
   \   00000B   8C82         MOV     DPL,R4
   \   00000D   8D83         MOV     DPH,R5
   \   00000F   A3           INC     DPTR
   \   000010   AC82         MOV     R4,DPL
   \   000012   AD83         MOV     R5,DPH
   \                     ??strStartWith_0:
   \   000014   8C82         MOV     DPL,R4
   \   000016   8D83         MOV     DPH,R5
   \   000018   E0           MOVX    A,@DPTR
   \   000019   F8           MOV     R0,A
   \   00001A   600C         JZ      ??strStartWith_2
   \   00001C   8A82         MOV     DPL,R2
   \   00001E   8B83         MOV     DPH,R3
   \   000020   E0           MOVX    A,@DPTR
   \   000021   68           XRL     A,R0
   \   000022   60E2         JZ      ??strStartWith_1
   \   000024   7900         MOV     R1,#0x0
   \   000026   8002         SJMP    ??strStartWith_3
    807            }
    808            return 1;
   \                     ??strStartWith_2:
   \   000028   7901         MOV     R1,#0x1
   \                     ??strStartWith_3:
   \   00002A   02....       LJMP    ??Subroutine19_0 & 0xFFFF
    809          }
    810          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    811          static uint8 strEqual(char* str1, char* str2)
   \                     strEqual:
    812          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   \   000004   800E         SJMP    ??strEqual_0
    813            while (*str2 && *str1) {
    814              if (*str1 != *str2) {
    815                return 0;
    816              }
    817              str1++;
   \                     ??strEqual_1:
   \   000006   A3           INC     DPTR
   \   000007   AA82         MOV     R2,DPL
   \   000009   AB83         MOV     R3,DPH
    818              str2++;
   \   00000B   8C82         MOV     DPL,R4
   \   00000D   8D83         MOV     DPH,R5
   \   00000F   A3           INC     DPTR
   \   000010   AC82         MOV     R4,DPL
   \   000012   AD83         MOV     R5,DPH
   \                     ??strEqual_0:
   \   000014   8C82         MOV     DPL,R4
   \   000016   8D83         MOV     DPH,R5
   \   000018   E0           MOVX    A,@DPTR
   \   000019   F8           MOV     R0,A
   \   00001A   6010         JZ      ??strEqual_2
   \   00001C   8A82         MOV     DPL,R2
   \   00001E   8B83         MOV     DPH,R3
   \   000020   E0           MOVX    A,@DPTR
   \   000021   F9           MOV     R1,A
   \   000022   6008         JZ      ??strEqual_2
   \   000024   E8           MOV     A,R0
   \   000025   69           XRL     A,R1
   \   000026   60DE         JZ      ??strEqual_1
   \                     ??strEqual_3:
   \   000028   7900         MOV     R1,#0x0
   \   00002A   8010         SJMP    ??strEqual_4
    819            }
    820            if (*str1 == *str2) {
   \                     ??strEqual_2:
   \   00002C   8A82         MOV     DPL,R2
   \   00002E   8B83         MOV     DPH,R3
   \   000030   E0           MOVX    A,@DPTR
   \   000031   F8           MOV     R0,A
   \   000032   8C82         MOV     DPL,R4
   \   000034   8D83         MOV     DPH,R5
   \   000036   E0           MOVX    A,@DPTR
   \   000037   68           XRL     A,R0
   \   000038   70EE         JNZ     ??strEqual_3
    821              return 1;
   \   00003A   7901         MOV     R1,#0x1
    822            } else {
   \                     ??strEqual_4:
   \   00003C   02....       LJMP    ??Subroutine19_0 & 0xFFFF
    823              return 0;
    824            }
    825          }
    826          /*********************************************************************
    827           * @fn      GenericApp_MessageMSGCB
    828           *
    829           * @brief   Data message processor callback.  This function processes
    830           *          any incoming data - probably from other devices.  So, based
    831           *          on cluster ID, perform the intended action.
    832           *
    833           * @param   none
    834           *
    835           * @return  none
    836           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    837          void GenericApp_MessageMSGCB( afIncomingMSGPacket_t *pkt )
   \                     GenericApp_MessageMSGCB:
    838          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 0,R2
   \   000007   8B..         MOV     ?V0 + 1,R3
    839               
    840            switch ( pkt->clusterId )
   \   000009   8A82         MOV     DPL,R2
   \   00000B   8B83         MOV     DPH,R3
   \   00000D   A3           INC     DPTR
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   A3           INC     DPTR
   \   000011   E0           MOVX    A,@DPTR
   \   000012   6401         XRL     A,#0x1
   \   000014   7002         JNZ     ??GenericApp_MessageMSGCB_0
   \   000016   A3           INC     DPTR
   \   000017   E0           MOVX    A,@DPTR
   \                     ??GenericApp_MessageMSGCB_0:
   \   000018   6003         JZ      $+5
   \   00001A   02....       LJMP    ??GenericApp_MessageMSGCB_1 & 0xFFFF
    841            {
    842              case GENERICAPP_CLUSTERID:
    843                
    844                printf("process Cmd: %s\n", pkt->cmd.Data);
   \   00001D   EA           MOV     A,R2
   \   00001E   2421         ADD     A,#0x21
   \   000020   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   000023   12....       LCALL   ?PUSH_XSTACK8_X_TWO
   \   000026   7A..         MOV     R2,#`?<Constant "process Cmd: %s\\n">` & 0xff
   \   000028   7B..         MOV     R3,#(`?<Constant "process Cmd: %s\\n">` >> 8) & 0xff
   \   00002A   12....       LCALL   ??Subroutine23_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_62:
   \   00002D   12....       LCALL   ?DEALLOC_XSTACK8
    845                
    846                uint8* cmdData = pkt->cmd.Data;
   \   000030   8E82         MOV     DPL,R6
   \   000032   8F83         MOV     DPH,R7
   \   000034   E0           MOVX    A,@DPTR
   \   000035   FE           MOV     R6,A
   \   000036   A3           INC     DPTR
   \   000037   E0           MOVX    A,@DPTR
   \   000038   FF           MOV     R7,A
    847                
    848                if (strStartWith(cmdData, "ReportNamesResp")) {
   \   000039                ; Setup parameters for call to function strStartWith
   \   000039   7C..         MOV     R4,#`?<Constant "ReportNamesResp">` & 0xff
   \   00003B   7D..         MOV     R5,#(`?<Constant "ReportNamesResp">` >> 8) & 0xff
   \   00003D   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_40:
   \   000040   6003         JZ      $+5
   \   000042   02....       LJMP    ??GenericApp_MessageMSGCB_1 & 0xFFFF
    849                  // nothing to do
    850                  
    851                } else if (strStartWith(cmdData, "ReportNames")) {
   \   000045                ; Setup parameters for call to function strStartWith
   \   000045   7C..         MOV     R4,#`?<Constant "ReportNames">` & 0xff
   \   000047   7D..         MOV     R5,#(`?<Constant "ReportNames">` >> 8) & 0xff
   \   000049   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_41:
   \   00004C   600A         JZ      ??GenericApp_MessageMSGCB_2
    852                   processReportNames(pkt);
   \   00004E                ; Setup parameters for call to function processReportNames
   \   00004E   AA..         MOV     R2,?V0 + 0
   \   000050   AB..         MOV     R3,?V0 + 1
   \   000052   12....       LCALL   ??processReportNames?relay
   \   000055   02....       LJMP    ??GenericApp_MessageMSGCB_1 & 0xFFFF
    853                } else if (strStartWith(cmdData, "LightStatusResp")) {
   \                     ??GenericApp_MessageMSGCB_2:
   \   000058                ; Setup parameters for call to function strStartWith
   \   000058   7C..         MOV     R4,#`?<Constant "LightStatusResp">` & 0xff
   \   00005A   7D..         MOV     R5,#(`?<Constant "LightStatusResp">` >> 8) & 0xff
   \   00005C   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_42:
   \   00005F   6003         JZ      $+5
   \   000061   02....       LJMP    ??GenericApp_MessageMSGCB_1 & 0xFFFF
    854                  // nothing to do
    855                } else if (strStartWith(cmdData, "LightStatus")) {
   \   000064                ; Setup parameters for call to function strStartWith
   \   000064   7C..         MOV     R4,#`?<Constant "LightStatus">` & 0xff
   \   000066   7D..         MOV     R5,#(`?<Constant "LightStatus">` >> 8) & 0xff
   \   000068   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_43:
   \   00006B   6009         JZ      ??GenericApp_MessageMSGCB_3
    856                   processLightStatus(pkt);
   \   00006D                ; Setup parameters for call to function processLightStatus
   \   00006D   AA..         MOV     R2,?V0 + 0
   \   00006F   AB..         MOV     R3,?V0 + 1
   \   000071   12....       LCALL   ??processLightStatus?relay
   \   000074   806F         SJMP    ??GenericApp_MessageMSGCB_1
    857                } else if (strStartWith(cmdData, "LightOnResp")) {
   \                     ??GenericApp_MessageMSGCB_3:
   \   000076                ; Setup parameters for call to function strStartWith
   \   000076   7C..         MOV     R4,#`?<Constant "LightOnResp">` & 0xff
   \   000078   7D..         MOV     R5,#(`?<Constant "LightOnResp">` >> 8) & 0xff
   \   00007A   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_44:
   \   00007D   7066         JNZ     ??GenericApp_MessageMSGCB_1
    858                  // nothing to do
    859                } else if (strStartWith(cmdData, "LightOn")) {
   \   00007F                ; Setup parameters for call to function strStartWith
   \   00007F   7C..         MOV     R4,#`?<Constant "LightOn">` & 0xff
   \   000081   7D..         MOV     R5,#(`?<Constant "LightOn">` >> 8) & 0xff
   \   000083   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_45:
   \   000086   600F         JZ      ??GenericApp_MessageMSGCB_4
    860                   processLightOn(pkt);
   \   000088                ; Setup parameters for call to function processLightCmd
   \   000088   7901         MOV     R1,#0x1
   \   00008A   7C..         MOV     R4,#`?<Constant "LightOn">` & 0xff
   \   00008C   7D..         MOV     R5,#(`?<Constant "LightOn">` >> 8) & 0xff
   \                     ??GenericApp_MessageMSGCB_5:
   \   00008E   AA..         MOV     R2,?V0 + 0
   \   000090   AB..         MOV     R3,?V0 + 1
   \   000092   12....       LCALL   ??processLightCmd?relay
    861                } else if (strStartWith(cmdData, "LightOffLaterResp")) {
   \   000095   804E         SJMP    ??GenericApp_MessageMSGCB_1
   \                     ??GenericApp_MessageMSGCB_4:
   \   000097                ; Setup parameters for call to function strStartWith
   \   000097   7C..         MOV     R4,#`?<Constant "LightOffLaterResp">` & 0xff
   \   000099   7D..         MOV     R5,#(`?<Constant "LightOffLaterResp">` >> 8) & 0xff
   \   00009B   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_46:
   \   00009E   7045         JNZ     ??GenericApp_MessageMSGCB_1
    862                  // nothing to do
    863                } else if (strStartWith(cmdData, "LightOffLater")) { // LightOffLater 0040
   \   0000A0                ; Setup parameters for call to function strStartWith
   \   0000A0   7C..         MOV     R4,#`?<Constant "LightOffLater">` & 0xff
   \   0000A2   7D..         MOV     R5,#(`?<Constant "LightOffLater">` >> 8) & 0xff
   \   0000A4   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_47:
   \   0000A7   6008         JZ      ??GenericApp_MessageMSGCB_6
    864                   processLightOffLater(pkt);
   \   0000A9                ; Setup parameters for call to function processLightCmd
   \   0000A9   7900         MOV     R1,#0x0
   \   0000AB   7C..         MOV     R4,#`?<Constant "LightOffLater">` & 0xff
   \   0000AD   7D..         MOV     R5,#(`?<Constant "LightOffLater">` >> 8) & 0xff
   \   0000AF   80DD         SJMP    ??GenericApp_MessageMSGCB_5
    865                } else if (strStartWith(cmdData, "LightToggleResp")) {
   \                     ??GenericApp_MessageMSGCB_6:
   \   0000B1                ; Setup parameters for call to function strStartWith
   \   0000B1   7C..         MOV     R4,#`?<Constant "LightToggleResp">` & 0xff
   \   0000B3   7D..         MOV     R5,#(`?<Constant "LightToggleResp">` >> 8) & 0xff
   \   0000B5   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_48:
   \   0000B8   702B         JNZ     ??GenericApp_MessageMSGCB_1
    866                  // nothing to do
    867                } else if (strStartWith(cmdData, "LightToggle")) {
   \   0000BA                ; Setup parameters for call to function strStartWith
   \   0000BA   7C..         MOV     R4,#`?<Constant "LightToggle">` & 0xff
   \   0000BC   7D..         MOV     R5,#(`?<Constant "LightToggle">` >> 8) & 0xff
   \   0000BE   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_49:
   \   0000C1   6009         JZ      ??GenericApp_MessageMSGCB_7
    868                   processLightToggle(pkt);
   \   0000C3                ; Setup parameters for call to function processLightToggle
   \   0000C3   AA..         MOV     R2,?V0 + 0
   \   0000C5   AB..         MOV     R3,?V0 + 1
   \   0000C7   12....       LCALL   ??processLightToggle?relay
   \   0000CA   8019         SJMP    ??GenericApp_MessageMSGCB_1
    869                } else if (strStartWith(cmdData, "LightOffResp")) {
   \                     ??GenericApp_MessageMSGCB_7:
   \   0000CC                ; Setup parameters for call to function strStartWith
   \   0000CC   7C..         MOV     R4,#`?<Constant "LightOffResp">` & 0xff
   \   0000CE   7D..         MOV     R5,#(`?<Constant "LightOffResp">` >> 8) & 0xff
   \   0000D0   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_50:
   \   0000D3   7010         JNZ     ??GenericApp_MessageMSGCB_1
    870                  // nothing to do
    871                } else if (strStartWith(cmdData, "LightOff")) {
   \   0000D5                ; Setup parameters for call to function strStartWith
   \   0000D5   7C..         MOV     R4,#`?<Constant "LightOff">` & 0xff
   \   0000D7   7D..         MOV     R5,#(`?<Constant "LightOff">` >> 8) & 0xff
   \   0000D9   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_51:
   \   0000DC   6007         JZ      ??GenericApp_MessageMSGCB_1
    872                   processLightOff(pkt);
   \   0000DE                ; Setup parameters for call to function processLightOff
   \   0000DE   AA..         MOV     R2,?V0 + 0
   \   0000E0   AB..         MOV     R3,?V0 + 1
   \   0000E2   12....       LCALL   ??processLightOff?relay
    873                }
    874                break;
    875            }
    876          }
   \                     ??GenericApp_MessageMSGCB_1:
   \   0000E5   02....       LJMP    ??Subroutine25_0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   EE           MOV     A,R6
   \   000001   FA           MOV     R2,A
   \   000002   EF           MOV     A,R7
   \   000003   FB           MOV     R3,A
   \   000004                REQUIRE ??Subroutine22_0
   \   000004                ; // Fall through to label ??Subroutine22_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine22_0:
   \   000000   12....       LCALL   ??strStartWith?relay
   \   000003   E9           MOV     A,R1
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   F8           MOV     R0,A
   \   000001   EB           MOV     A,R3
   \   000002   3400         ADDC    A,#0x0
   \   000004   F9           MOV     R1,A
   \   000005   E8           MOV     A,R0
   \   000006   FE           MOV     R6,A
   \   000007   E9           MOV     A,R1
   \   000008   FF           MOV     R7,A
   \   000009                ; Setup parameters for call to function printf
   \   000009   8E82         MOV     DPL,R6
   \   00000B   8F83         MOV     DPH,R7
   \   00000D   22           RET
    877          
    878          /*********************************************************************
    879           * @fn      GenericApp_SendTheMessage
    880           *
    881           * @brief   Send "the" message.
    882           *
    883           * @param   none
    884           *
    885           * @return  none
    886           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    887          void GenericApp_SendTheMessage( void )
   \                     GenericApp_SendTheMessage:
    888          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 12
   \   000005   74F4         MOV     A,#-0xc
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    889            afAddrType_t P2P_DstAddr;
    890            P2P_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \   00000A   7408         MOV     A,#0x8
   \   00000C   12....       LCALL   ?XSTACK_DISP0_8
   \   00000F   7402         MOV     A,#0x2
   \   000011   F0           MOVX    @DPTR,A
    891            P2P_DstAddr.endPoint = GENERICAPP_ENDPOINT;
   \   000012   7409         MOV     A,#0x9
   \   000014   12....       LCALL   ?XSTACK_DISP0_8
   \   000017   12....       LCALL   ?Subroutine3 & 0xFFFF
    892            P2P_DstAddr.addr.shortAddr = 0xFFFF; //终端短地址在LCD上有显示，此处换成终端短地址就可以点播了。
    893          
    894            if ( AF_DataRequest( &P2P_DstAddr, &GenericApp_epDesc,
    895                                 GENERICAPP_CLUSTERID,
    896                                 1,
    897                                 RxBuf,
    898                                 &GenericApp_TransID,
    899                                 AF_DISCV_ROUTE, AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \                     ??CrossCallReturnLabel_2:
   \   00001A                ; Setup parameters for call to function AF_DataRequest
   \   00001A   75..1E       MOV     ?V0 + 0,#0x1e
   \   00001D   78..         MOV     R0,#?V0 + 0
   \   00001F   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000022   75....       MOV     ?V0 + 0,#GenericApp_TransID & 0xff
   \   000025   75....       MOV     ?V0 + 1,#(GenericApp_TransID >> 8) & 0xff
   \   000028   78..         MOV     R0,#?V0 + 0
   \   00002A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00002D   75....       MOV     ?V0 + 0,#RxBuf & 0xff
   \   000030   75....       MOV     ?V0 + 1,#(RxBuf >> 8) & 0xff
   \   000033   78..         MOV     R0,#?V0 + 0
   \   000035   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000038   75..01       MOV     ?V0 + 0,#0x1
   \   00003B   75..00       MOV     ?V0 + 1,#0x0
   \   00003E   78..         MOV     R0,#?V0 + 0
   \   000040   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000043   78..         MOV     R0,#?V0 + 0
   \   000045   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000048   7920         MOV     R1,#0x20
   \   00004A   7C..         MOV     R4,#GenericApp_epDesc & 0xff
   \   00004C   7D..         MOV     R5,#(GenericApp_epDesc >> 8) & 0xff
   \   00004E   7409         MOV     A,#0x9
   \   000050   12....       LCALL   ?XSTACK_DISP0_8
   \   000053   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_22:
   \   000056   12....       LCALL   ?DEALLOC_XSTACK8
    900            {
    901              // Successfully requested to be sent.
    902            }
    903            else
    904            {
    905              // Error occurred in request to send.
    906            }
    907          }
   \   000059   740C         MOV     A,#0xc
   \   00005B   02....       LJMP    ??Subroutine24_0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   740A         MOV     A,#0xa
   \   000002   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_26:
   \   000005   74FF         MOV     A,#-0x1
   \   000007   F0           MOVX    @DPTR,A
   \   000008   A3           INC     DPTR
   \   000009   F0           MOVX    @DPTR,A
   \   00000A   22           RET
    908          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    909          void sendReportNamesMsg(void)
   \                     sendReportNamesMsg:
    910          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 24
   \   000005   74E8         MOV     A,#-0x18
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    911            afAddrType_t P2P_DstAddr;
    912            P2P_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \   00000A   7408         MOV     A,#0x8
   \   00000C   12....       LCALL   ?XSTACK_DISP0_8
   \   00000F   7402         MOV     A,#0x2
   \   000011   F0           MOVX    @DPTR,A
    913            P2P_DstAddr.endPoint = GENERICAPP_ENDPOINT;
   \   000012   7409         MOV     A,#0x9
   \   000014   12....       LCALL   ?XSTACK_DISP0_8
   \   000017   12....       LCALL   ?Subroutine3 & 0xFFFF
    914            P2P_DstAddr.addr.shortAddr = 0xFFFF; //终端短地址在LCD上有显示，此处换成终端短地址就可以点播了。
    915            char cmd[] = "ReportNames";
   \                     ??CrossCallReturnLabel_3:
   \   00001A   740C         MOV     A,#0xc
   \   00001C   12....       LCALL   ?XSTACK_DISP0_8
   \   00001F   AC82         MOV     R4,DPL
   \   000021   AD83         MOV     R5,DPH
   \   000023   7583..       MOV     DPH,#(`?<Constant "ReportNames">_1` >> 8) & 0xff
   \   000026   7582..       MOV     DPL,#`?<Constant "ReportNames">_1` & 0xff
   \   000029   740C         MOV     A,#0xc
   \   00002B   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    916              
    917            if ( AF_DataRequest( &P2P_DstAddr, &GenericApp_epDesc,
    918                                 GENERICAPP_CLUSTERID,
    919                                 osal_strlen(cmd)+1,
    920                                 (uint8*)cmd,
    921                                 &GenericApp_TransID,
    922                                 AF_DISCV_ROUTE, AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   00002E                ; Setup parameters for call to function AF_DataRequest
   \   00002E   75..1E       MOV     ?V0 + 0,#0x1e
   \   000031   78..         MOV     R0,#?V0 + 0
   \   000033   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000036   75....       MOV     ?V0 + 0,#GenericApp_TransID & 0xff
   \   000039   75....       MOV     ?V0 + 1,#(GenericApp_TransID >> 8) & 0xff
   \   00003C   78..         MOV     R0,#?V0 + 0
   \   00003E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000041   740F         MOV     A,#0xf
   \   000043   12....       LCALL   ?XSTACK_DISP0_8
   \   000046   8582..       MOV     ?V0 + 0,DPL
   \   000049   8583..       MOV     ?V0 + 1,DPH
   \   00004C   78..         MOV     R0,#?V0 + 0
   \   00004E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000051                ; Setup parameters for call to function osal_strlen
   \   000051   7411         MOV     A,#0x11
   \   000053   12....       LCALL   ?XSTACK_DISP0_8
   \   000056   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_32:
   \   000059   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005C   75..01       MOV     ?V0 + 0,#0x1
   \   00005F   75..00       MOV     ?V0 + 1,#0x0
   \   000062   78..         MOV     R0,#?V0 + 0
   \   000064   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000067   7920         MOV     R1,#0x20
   \   000069   7C..         MOV     R4,#GenericApp_epDesc & 0xff
   \   00006B   7D..         MOV     R5,#(GenericApp_epDesc >> 8) & 0xff
   \   00006D   7409         MOV     A,#0x9
   \   00006F   12....       LCALL   ?XSTACK_DISP0_8
   \   000072   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_23:
   \   000075   12....       LCALL   ?DEALLOC_XSTACK8
   \   000078   E9           MOV     A,R1
   \   000079   6007         JZ      ??sendReportNamesMsg_0
    923            {
    924              // Successfully requested to be sent.
    925            }
    926            else
    927            {
    928              printf("send ReportNames error\n");
   \   00007B                ; Setup parameters for call to function printf
   \   00007B   7A..         MOV     R2,#`?<Constant "send ReportNames error\\n">` & 0xff
   \   00007D   7B..         MOV     R3,#(`?<Constant "send ReportNames error\\n">` >> 8) & 0xff
   \   00007F   12....       LCALL   ??printf?relay
    929            }
    930          }
   \                     ??sendReportNamesMsg_0:
   \   000082   7418         MOV     A,#0x18
   \   000084   80..         SJMP    ??Subroutine24_0
    931          
    932          static uint16 findHexValue(uint8 ch);
    933          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    934          uint16 findHexValue(uint8 ch)
   \                     findHexValue:
    935          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    936            switch(ch) {
   \   000004   8982         MOV     DPL,R1
   \   000006   AA82         MOV     R2,DPL
   \   000008   E9           MOV     A,R1
   \   000009   12....       LCALL   ?UC_SWITCH_SPARSE
   \                     `?<Jumptable for findHexValue>_0`:
   \   00000C   03           DB        3
   \   00000D   30           DB        48
   \   00000E   39           DB        57
   \   00000F   ....         DW        ??findHexValue_0
   \   000011   41           DB        65
   \   000012   46           DB        70
   \   000013   ....         DW        ??findHexValue_1
   \   000015   61           DB        97
   \   000016   66           DB        102
   \   000017   ....         DW        ??findHexValue_2
   \   000019   00           DB        0
   \   00001A   ....         DW        ??findHexValue_3
    937            case '0':
    938            case '1':
    939            case '2':
    940            case '3':
    941            case '4':
    942            case '5':
    943            case '6':
    944            case '7':
    945            case '8':
    946            case '9':
    947              return ch - '0';
   \                     ??findHexValue_0:
   \   00001C   EA           MOV     A,R2
   \   00001D   24D0         ADD     A,#-0x30
   \                     ??findHexValue_4:
   \   00001F   FA           MOV     R2,A
   \   000020   E4           CLR     A
   \   000021   34FF         ADDC    A,#-0x1
   \   000023   FB           MOV     R3,A
   \   000024   8013         SJMP    ??findHexValue_5
    948            case 'A':
    949            case 'B':
    950            case 'C':
    951            case 'D':
    952            case 'E':
    953            case 'F':
    954              return ch - 'A' + 10;
   \                     ??findHexValue_1:
   \   000026   EA           MOV     A,R2
   \   000027   24C9         ADD     A,#-0x37
   \   000029   80F4         SJMP    ??findHexValue_4
    955            case 'a':
    956            case 'b':
    957            case 'c':
    958            case 'd':
    959            case 'e':
    960            case 'f':
    961              return ch - 'a' + 10;
   \                     ??findHexValue_2:
   \   00002B   EA           MOV     A,R2
   \   00002C   24A9         ADD     A,#-0x57
   \   00002E   FA           MOV     R2,A
   \   00002F   E4           CLR     A
   \   000030   34FF         ADDC    A,#-0x1
   \   000032   FB           MOV     R3,A
   \   000033   8004         SJMP    ??findHexValue_5
    962            }
    963            return 0;
   \                     ??findHexValue_3:
   \   000035   7A00         MOV     R2,#0x0
   \   000037   7B00         MOV     R3,#0x0
   \                     ??findHexValue_5:
   \   000039   02....       LJMP    ??Subroutine19_0 & 0xFFFF
    964          }
    965          
    966          
    967          
    968          uint16 strToUint16(uint8* str)
    969          {
    970              return findHexValue(str[0])*16*16*16 + findHexValue(str[1])*16*16 + findHexValue(str[2])*16 + findHexValue(str[3]);
    971          }
    972          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    973          uint16 strToDec(uint8 * str)
   \                     strToDec:
    974          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    975            uint16 ret = 0;
   \   000005   7800         MOV     R0,#0x0
   \   000007   7900         MOV     R1,#0x0
   \   000009   8023         SJMP    ??strToDec_0
    976            while (*str && (*str != ' ')) {
    977              ret = ret*10 + (*str - '0');
   \                     ??strToDec_1:
   \   00000B   E8           MOV     A,R0
   \   00000C   75F00A       MOV     B,#0xa
   \   00000F   A4           MUL     AB
   \   000010   F8           MOV     R0,A
   \   000011   ACF0         MOV     R4,B
   \   000013   75F00A       MOV     B,#0xa
   \   000016   E9           MOV     A,R1
   \   000017   A4           MUL     AB
   \   000018   2C           ADD     A,R4
   \   000019   F9           MOV     R1,A
   \   00001A   E5..         MOV     A,?V0 + 0
   \   00001C   24D0         ADD     A,#-0x30
   \   00001E   FC           MOV     R4,A
   \   00001F   E4           CLR     A
   \   000020   34FF         ADDC    A,#-0x1
   \   000022   FD           MOV     R5,A
   \   000023   E8           MOV     A,R0
   \   000024   2C           ADD     A,R4
   \   000025   F8           MOV     R0,A
   \   000026   E9           MOV     A,R1
   \   000027   3D           ADDC    A,R5
   \   000028   F9           MOV     R1,A
    978              str++;
   \   000029   A3           INC     DPTR
   \   00002A   AA82         MOV     R2,DPL
   \   00002C   AB83         MOV     R3,DPH
    979            }
   \                     ??strToDec_0:
   \   00002E   8A82         MOV     DPL,R2
   \   000030   8B83         MOV     DPH,R3
   \   000032   E0           MOVX    A,@DPTR
   \   000033   F5..         MOV     ?V0 + 0,A
   \   000035   6006         JZ      ??strToDec_2
   \   000037   7420         MOV     A,#0x20
   \   000039   65..         XRL     A,?V0 + 0
   \   00003B   70CE         JNZ     ??strToDec_1
    980            return ret;
   \                     ??strToDec_2:
   \   00003D   E8           MOV     A,R0
   \   00003E   FA           MOV     R2,A
   \   00003F   E9           MOV     A,R1
   \   000040   FB           MOV     R3,A
   \   000041   02....       LJMP    ??Subroutine25_0 & 0xFFFF
    981          }
    982          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    983          void sendSendCmdMsg(uint8* cmd)
   \                     sendSendCmdMsg:
    984          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 12
   \   000005   74F4         MOV     A,#-0xc
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 0,R2
   \   00000C   8B..         MOV     ?V0 + 1,R3
    985            
    986            uint16 shortAddr = strToUint16(cmd);
   \   00000E                ; Setup parameters for call to function findHexValue
   \   00000E   8A82         MOV     DPL,R2
   \   000010   8B83         MOV     DPH,R3
   \   000012   12....       LCALL   ??Subroutine27_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_67:
   \   000015   8A..         MOV     ?V0 + 4,R2
   \   000017   8B..         MOV     ?V0 + 5,R3
   \   000019                ; Setup parameters for call to function findHexValue
   \   000019   85..82       MOV     DPL,?V0 + 0
   \   00001C   85..83       MOV     DPH,?V0 + 1
   \   00001F   12....       LCALL   ??Subroutine26_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_66:
   \   000022   8A..         MOV     ?V0 + 2,R2
   \   000024   AE..         MOV     R6,?V0 + 2
   \   000026                ; Setup parameters for call to function findHexValue
   \   000026   85..82       MOV     DPL,?V0 + 0
   \   000029   85..83       MOV     DPH,?V0 + 1
   \   00002C   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_64:
   \   00002F   8A..         MOV     ?V0 + 2,R2
   \   000031   8B..         MOV     ?V0 + 3,R3
   \   000033                ; Setup parameters for call to function findHexValue
   \   000033   85..82       MOV     DPL,?V0 + 0
   \   000036   85..83       MOV     DPH,?V0 + 1
   \   000039   A3           INC     DPTR
   \   00003A   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_65:
   \   00003D   8A..         MOV     ?V0 + 6,R2
   \   00003F   8B..         MOV     ?V0 + 7,R3
   \   000041   AC..         MOV     R4,?V0 + 6
   \   000043   AD..         MOV     R5,?V0 + 7
    987            cmd += 5;
   \   000045   E5..         MOV     A,?V0 + 0
   \   000047   2405         ADD     A,#0x5
   \   000049   F5..         MOV     ?V0 + 0,A
   \   00004B   E5..         MOV     A,?V0 + 1
   \   00004D   3400         ADDC    A,#0x0
   \   00004F   F5..         MOV     ?V0 + 1,A
    988            
    989            afAddrType_t P2P_DstAddr;
    990            P2P_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \   000051   7408         MOV     A,#0x8
   \   000053   12....       LCALL   ?XSTACK_DISP0_8
   \   000056   7402         MOV     A,#0x2
   \   000058   F0           MOVX    @DPTR,A
    991            P2P_DstAddr.endPoint = GENERICAPP_ENDPOINT;
   \   000059   7409         MOV     A,#0x9
   \   00005B   12....       LCALL   ?XSTACK_DISP0_8
   \   00005E   740A         MOV     A,#0xa
   \   000060   F0           MOVX    @DPTR,A
    992            P2P_DstAddr.addr.shortAddr = shortAddr; //终端短地址在LCD上有显示，此处换成终端短地址就可以点播了。
   \   000061   740C         MOV     A,#0xc
   \   000063   78..         MOV     R0,#?V0 + 4
   \   000065   12....       LCALL   ?S_SHL
   \   000068   CE           XCH     A,R6
   \   000069   FF           MOV     R7,A
   \   00006A   E4           CLR     A
   \   00006B   2400         ADD     A,#0x0
   \   00006D   E5..         MOV     A,?V0 + 5
   \   00006F   3F           ADDC    A,R7
   \   000070   FB           MOV     R3,A
   \   000071   7404         MOV     A,#0x4
   \   000073   78..         MOV     R0,#?V0 + 2
   \   000075   12....       LCALL   ?S_SHL
   \   000078   25..         ADD     A,?V0 + 2
   \   00007A   F8           MOV     R0,A
   \   00007B   EB           MOV     A,R3
   \   00007C   35..         ADDC    A,?V0 + 3
   \   00007E   F9           MOV     R1,A
   \   00007F   E8           MOV     A,R0
   \   000080   2C           ADD     A,R4
   \   000081   F8           MOV     R0,A
   \   000082   E9           MOV     A,R1
   \   000083   3D           ADDC    A,R5
   \   000084   F9           MOV     R1,A
   \   000085   85..82       MOV     DPL,?XSP + 0
   \   000088   85..83       MOV     DPH,?XSP + 1
   \   00008B   E8           MOV     A,R0
   \   00008C   F0           MOVX    @DPTR,A
   \   00008D   A3           INC     DPTR
   \   00008E   E9           MOV     A,R1
   \   00008F   F0           MOVX    @DPTR,A
    993            
    994            printf("sendCmd: addr=%04X, cmd=%s\n", shortAddr, cmd);
   \   000090                ; Setup parameters for call to function printf
   \   000090   78..         MOV     R0,#?V0 + 0
   \   000092   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000095   7402         MOV     A,#0x2
   \   000097   12....       LCALL   ?XSTACK_DISP0_8
   \   00009A   12....       LCALL   ?PUSH_XSTACK8_X_TWO
   \   00009D   7A..         MOV     R2,#`?<Constant "sendCmd: addr=%04X, c...">` & 0xff
   \   00009F   7B..         MOV     R3,#(`?<Constant "sendCmd: addr=%04X, c...">` >> 8) & 0xff
   \   0000A1   12....       LCALL   ??printf?relay
   \   0000A4   7404         MOV     A,#0x4
   \   0000A6   12....       LCALL   ?DEALLOC_XSTACK8
    995            
    996            if ( AF_DataRequest( &P2P_DstAddr, &GenericApp_epDesc,
    997                                 GENERICAPP_CLUSTERID,
    998                                 osal_strlen((char*)cmd)+1,
    999                                 (uint8*)cmd,
   1000                                 &GenericApp_TransID,
   1001                                 AF_DISCV_ROUTE, AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   0000A9                ; Setup parameters for call to function AF_DataRequest
   \   0000A9   75..1E       MOV     ?V0 + 2,#0x1e
   \   0000AC   78..         MOV     R0,#?V0 + 2
   \   0000AE   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000B1   75....       MOV     ?V0 + 2,#GenericApp_TransID & 0xff
   \   0000B4   75....       MOV     ?V0 + 3,#(GenericApp_TransID >> 8) & 0xff
   \   0000B7   78..         MOV     R0,#?V0 + 2
   \   0000B9   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000BC   78..         MOV     R0,#?V0 + 0
   \   0000BE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000C1                ; Setup parameters for call to function osal_strlen
   \   0000C1   AA..         MOV     R2,?V0 + 0
   \   0000C3   AB..         MOV     R3,?V0 + 1
   \   0000C5   12....       LCALL   ??Subroutine20_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_33:
   \   0000C8   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000CB   75..01       MOV     ?V0 + 0,#0x1
   \   0000CE   8E..         MOV     ?V0 + 1,R6
   \   0000D0   78..         MOV     R0,#?V0 + 0
   \   0000D2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000D5   7920         MOV     R1,#0x20
   \   0000D7   7C..         MOV     R4,#GenericApp_epDesc & 0xff
   \   0000D9   7D..         MOV     R5,#(GenericApp_epDesc >> 8) & 0xff
   \   0000DB   7409         MOV     A,#0x9
   \   0000DD   12....       LCALL   ?XSTACK_DISP0_8
   \   0000E0   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_24:
   \   0000E3   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000E6   E9           MOV     A,R1
   \   0000E7   6007         JZ      ??sendSendCmdMsg_0
   1002            {
   1003              // Successfully requested to be sent.
   1004            }
   1005            else
   1006            {
   1007              printf("send ReportNames error\n");
   \   0000E9                ; Setup parameters for call to function printf
   \   0000E9   7A..         MOV     R2,#`?<Constant "send ReportNames error\\n">` & 0xff
   \   0000EB   7B..         MOV     R3,#(`?<Constant "send ReportNames error\\n">` >> 8) & 0xff
   \   0000ED   12....       LCALL   ??printf?relay
   1008            }
   1009          }
   \                     ??sendSendCmdMsg_0:
   \   0000F0   740C         MOV     A,#0xc
   \   0000F2   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000F5   7F08         MOV     R7,#0x8
   \   0000F7   02....       LJMP    ?BANKED_LEAVE_XDATA
   1010          
   1011          
   1012          #define MY_UART_BUF_SIZE 64
   1013          #define MY_NAME_NV_ID 0x2701
   1014          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
   1015          char myName[MY_UART_BUF_SIZE];
   \                     myName:
   \   000000                DS 64
   \   000040                REQUIRE __INIT_XDATA_Z
   1016          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1017          static char* getMyName()
   \                     getMyName:
   1018          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   1019              if (osal_nv_read(MY_NAME_NV_ID, 0, MY_UART_BUF_SIZE, myName ) == ZSUCCESS) {
   \   000005                ; Setup parameters for call to function osal_nv_read
   \   000005   75....       MOV     ?V0 + 0,#myName & 0xff
   \   000008   75....       MOV     ?V0 + 1,#(myName >> 8) & 0xff
   \   00000B   78..         MOV     R0,#?V0 + 0
   \   00000D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000010   75..40       MOV     ?V0 + 0,#0x40
   \   000013   75..00       MOV     ?V0 + 1,#0x0
   \   000016   78..         MOV     R0,#?V0 + 0
   \   000018   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00001B   7C00         MOV     R4,#0x0
   \   00001D   7D00         MOV     R5,#0x0
   \   00001F   7A01         MOV     R2,#0x1
   \   000021   7B27         MOV     R3,#0x27
   \   000023   12....       LCALL   ??osal_nv_read?relay
   \   000026   7404         MOV     A,#0x4
   \   000028   12....       LCALL   ?DEALLOC_XSTACK8
   \   00002B   E9           MOV     A,R1
   \   00002C   6005         JZ      ??getMyName_0
   1020                
   1021              } else {
   1022                myName[0] = 0; 
   \   00002E   90....       MOV     DPTR,#myName
   \   000031   E4           CLR     A
   \   000032   F0           MOVX    @DPTR,A
   1023              }
   1024              
   1025              return myName;
   \                     ??getMyName_0:
   \   000033   7A..         MOV     R2,#myName & 0xff
   \   000035   7B..         MOV     R3,#(myName >> 8) & 0xff
   \   000037   02....       LJMP    ??Subroutine25_0 & 0xFFFF
   1026          }
   1027          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1028          static void processUartCB(uint8* buf, uint8 len)
   \                     processUartCB:
   1029          {
   \   000000   74EE         MOV     A,#-0x12
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 18
   \   000005                ; Auto size: 64
   \   000005   74C0         MOV     A,#-0x40
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 4,R2
   \   00000C   8B..         MOV     ?V0 + 5,R3
   \   00000E   89..         MOV     ?V0 + 0,R1
   1030            uint16 id;
   1031            uint16 itemLen;
   1032            //TODO disable overflow
   1033            buf[len] = 0;
   \   000010   8982         MOV     DPL,R1
   \   000012   8582..       MOV     ?V0 + 8,DPL
   \   000015   75..00       MOV     ?V0 + 9,#0x0
   \   000018   EA           MOV     A,R2
   \   000019   25..         ADD     A,?V0 + 8
   \   00001B   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   00001E   E4           CLR     A
   \   00001F   F0           MOVX    @DPTR,A
   1034            uint8 myBuf[MY_UART_BUF_SIZE];
   1035            
   1036            if (len >= MY_UART_BUF_SIZE || len < 1) {
   \   000020   74FF         MOV     A,#-0x1
   \   000022   25..         ADD     A,?V0 + 0
   \   000024   C3           CLR     C
   \   000025   943F         SUBB    A,#0x3f
   \   000027   400C         JC      ??processUartCB_0
   1037              printf("invalid buf length: %d\n", len);
   \   000029                ; Setup parameters for call to function printf
   \   000029   78..         MOV     R0,#?V0 + 8
   \   00002B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00002E   7A..         MOV     R2,#`?<Constant "invalid buf length: %d\\n">` & 0xff
   \   000030   7B..         MOV     R3,#(`?<Constant "invalid buf length: %d\\n">` >> 8) & 0xff
   \   000032   02....       LJMP    ??processUartCB_1 & 0xFFFF
   1038              return; 
   1039            }
   1040            
   1041           // printf("processUartCB: %s\n", buf);
   1042            
   1043            id = MY_NAME_NV_ID; // for name
   1044            if (strStartWith(buf, "RNV Name")) {
   \                     ??processUartCB_0:
   \   000035                ; Setup parameters for call to function strStartWith
   \   000035   7C..         MOV     R4,#`?<Constant "RNV Name">` & 0xff
   \   000037   7D..         MOV     R5,#(`?<Constant "RNV Name">` >> 8) & 0xff
   \   000039   12....       LCALL   ??Subroutine22_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_52:
   \   00003C   7003         JNZ     $+5
   \   00003E   02....       LJMP    ??processUartCB_2 & 0xFFFF
   1045              
   1046              itemLen = osal_nv_item_len(id);
   \   000041                ; Setup parameters for call to function osal_nv_item_len
   \   000041   7A01         MOV     R2,#0x1
   \   000043   7B27         MOV     R3,#0x27
   \   000045   12....       LCALL   ??osal_nv_item_len?relay
   \   000048   8A..         MOV     ?V0 + 2,R2
   \   00004A   8B..         MOV     ?V0 + 3,R3
   1047              if (itemLen > MY_UART_BUF_SIZE || itemLen == 0) {
   \   00004C   C3           CLR     C
   \   00004D   EA           MOV     A,R2
   \   00004E   9441         SUBB    A,#0x41
   \   000050   EB           MOV     A,R3
   \   000051   9400         SUBB    A,#0x0
   \   000053   5005         JNC     ??processUartCB_3
   \   000055   EA           MOV     A,R2
   \   000056   45..         ORL     A,?V0 + 3
   \   000058   700C         JNZ     ??processUartCB_4
   1048                printf("invalid nv item len: %d\n", itemLen);
   \                     ??processUartCB_3:
   \   00005A                ; Setup parameters for call to function printf
   \   00005A   78..         MOV     R0,#?V0 + 2
   \   00005C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005F   7A..         MOV     R2,#`?<Constant "invalid nv item len: %d\\n">` & 0xff
   \   000061   7B..         MOV     R3,#(`?<Constant "invalid nv item len: %d\\n">` >> 8) & 0xff
   \   000063   02....       LJMP    ??processUartCB_1 & 0xFFFF
   1049                return;
   1050              }
   1051              
   1052              if (osal_nv_read(id, 0, itemLen, myBuf ) == ZSUCCESS) {
   \                     ??processUartCB_4:
   \   000066                ; Setup parameters for call to function osal_nv_read
   \   000066   85..82       MOV     DPL,?XSP + 0
   \   000069   85..83       MOV     DPH,?XSP + 1
   \   00006C   8582..       MOV     ?V0 + 4,DPL
   \   00006F   8583..       MOV     ?V0 + 5,DPH
   \   000072   78..         MOV     R0,#?V0 + 4
   \   000074   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000077   78..         MOV     R0,#?V0 + 2
   \   000079   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00007C   7C00         MOV     R4,#0x0
   \   00007E   7D00         MOV     R5,#0x0
   \   000080   7A01         MOV     R2,#0x1
   \   000082   7B27         MOV     R3,#0x27
   \   000084   12....       LCALL   ??osal_nv_read?relay
   \   000087   7404         MOV     A,#0x4
   \   000089   12....       LCALL   ?DEALLOC_XSTACK8
   \   00008C   E9           MOV     A,R1
   \   00008D   6003         JZ      $+5
   \   00008F   02....       LJMP    ??processUartCB_5 & 0xFFFF
   1053                myBuf[itemLen-1] = 0;
   \   000092   85..82       MOV     DPL,?XSP + 0
   \   000095   85..83       MOV     DPH,?XSP + 1
   \   000098   E582         MOV     A,DPL
   \   00009A   25..         ADD     A,?V0 + 2
   \   00009C   F8           MOV     R0,A
   \   00009D   E583         MOV     A,DPH
   \   00009F   35..         ADDC    A,?V0 + 3
   \   0000A1   F9           MOV     R1,A
   \   0000A2   E8           MOV     A,R0
   \   0000A3   24FF         ADD     A,#-0x1
   \   0000A5   F582         MOV     DPL,A
   \   0000A7   E9           MOV     A,R1
   \   0000A8   34FF         ADDC    A,#-0x1
   \   0000AA   F583         MOV     DPH,A
   \   0000AC   E4           CLR     A
   \   0000AD   12....       LCALL   ?Subroutine17 & 0xFFFF
   1054                printf("Name = %s\n", myBuf);
   1055              }
   1056              
   1057            } else if (strStartWith(buf, "WNV Name ")) {
   \                     ??CrossCallReturnLabel_27:
   \   0000B0   8582..       MOV     ?V0 + 2,DPL
   \   0000B3   8583..       MOV     ?V0 + 3,DPH
   \   0000B6   78..         MOV     R0,#?V0 + 2
   \   0000B8   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000BB   7A..         MOV     R2,#`?<Constant "Name = %s\\n">` & 0xff
   \   0000BD   7B..         MOV     R3,#(`?<Constant "Name = %s\\n">` >> 8) & 0xff
   \   0000BF   02....       LJMP    ??processUartCB_1 & 0xFFFF
   \                     ??processUartCB_2:
   \   0000C2                ; Setup parameters for call to function strStartWith
   \   0000C2   7C..         MOV     R4,#`?<Constant "WNV Name ">` & 0xff
   \   0000C4   7D..         MOV     R5,#(`?<Constant "WNV Name ">` >> 8) & 0xff
   \   0000C6   AA..         MOV     R2,?V0 + 4
   \   0000C8   AB..         MOV     R3,?V0 + 5
   \   0000CA   12....       LCALL   ??Subroutine22_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_53:
   \   0000CD   7003         JNZ     $+5
   \   0000CF   02....       LJMP    ??processUartCB_6 & 0xFFFF
   1058              
   1059              osal_memcpy(myBuf, buf,  len);
   \   0000D2                ; Setup parameters for call to function osal_memcpy
   \   0000D2   75..00       MOV     ?V0 + 6,#0x0
   \   0000D5   78..         MOV     R0,#?V0 + 4
   \   0000D7   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000DA   85....       MOV     ?V0 + 2,?V0 + 0
   \   0000DD   AC..         MOV     R4,?V0 + 2
   \   0000DF   7D00         MOV     R5,#0x0
   \   0000E1   7403         MOV     A,#0x3
   \   0000E3   12....       LCALL   ?XSTACK_DISP0_8
   \   0000E6   AA82         MOV     R2,DPL
   \   0000E8   AB83         MOV     R3,DPH
   \   0000EA   12....       LCALL   ??osal_memcpy?relay
   \   0000ED   7403         MOV     A,#0x3
   \   0000EF   12....       LCALL   ?DEALLOC_XSTACK8
   1060              myBuf[len] = 0;
   \   0000F2   85..82       MOV     DPL,?XSP + 0
   \   0000F5   85..83       MOV     DPH,?XSP + 1
   \   0000F8   E582         MOV     A,DPL
   \   0000FA   25..         ADD     A,?V0 + 8
   \   0000FC   F582         MOV     DPL,A
   \   0000FE   E583         MOV     A,DPH
   \   000100   3400         ADDC    A,#0x0
   \   000102   F583         MOV     DPH,A
   \   000104   E4           CLR     A
   \   000105   F0           MOVX    @DPTR,A
   1061              osal_nv_item_init(id, MY_UART_BUF_SIZE, NULL);
   \   000106                ; Setup parameters for call to function osal_nv_item_init
   \   000106   F5..         MOV     ?V0 + 2,A
   \   000108   F5..         MOV     ?V0 + 3,A
   \   00010A   78..         MOV     R0,#?V0 + 2
   \   00010C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00010F   7C40         MOV     R4,#0x40
   \   000111   7D00         MOV     R5,#0x0
   \   000113   7A01         MOV     R2,#0x1
   \   000115   7B27         MOV     R3,#0x27
   \   000117   12....       LCALL   ??osal_nv_item_init?relay
   \   00011A   7402         MOV     A,#0x2
   \   00011C   12....       LCALL   ?DEALLOC_XSTACK8
   1062              osal_nv_write(id, 0, len-8, myBuf+9);
   \   00011F                ; Setup parameters for call to function osal_nv_write
   \   00011F   7409         MOV     A,#0x9
   \   000121   12....       LCALL   ?XSTACK_DISP0_8
   \   000124   8582..       MOV     ?V0 + 2,DPL
   \   000127   8583..       MOV     ?V0 + 3,DPH
   \   00012A   78..         MOV     R0,#?V0 + 2
   \   00012C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00012F   E5..         MOV     A,?V0 + 8
   \   000131   24F8         ADD     A,#-0x8
   \   000133   F5..         MOV     ?V0 + 2,A
   \   000135   E4           CLR     A
   \   000136   34FF         ADDC    A,#-0x1
   \   000138   F5..         MOV     ?V0 + 3,A
   \   00013A   78..         MOV     R0,#?V0 + 2
   \   00013C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00013F   7C00         MOV     R4,#0x0
   \   000141   7D00         MOV     R5,#0x0
   \   000143   7A01         MOV     R2,#0x1
   \   000145   7B27         MOV     R3,#0x27
   \   000147   12....       LCALL   ??osal_nv_write?relay
   \   00014A   7404         MOV     A,#0x4
   \   00014C   12....       LCALL   ?DEALLOC_XSTACK8
   1063              printf("receive cmd: %s\n", myBuf);
   \   00014F                ; Setup parameters for call to function printf
   \   00014F   85..82       MOV     DPL,?XSP + 0
   \   000152   85..83       MOV     DPH,?XSP + 1
   \   000155   8582..       MOV     ?V0 + 2,DPL
   \   000158   8583..       MOV     ?V0 + 3,DPH
   \   00015B   78..         MOV     R0,#?V0 + 2
   \   00015D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000160   7A..         MOV     R2,#`?<Constant "receive cmd: %s\\n">` & 0xff
   \   000162   7B..         MOV     R3,#(`?<Constant "receive cmd: %s\\n">` >> 8) & 0xff
   \   000164   8043         SJMP    ??processUartCB_1
   1064            } else if (strStartWith(buf, "ReportNames")) {
   \                     ??processUartCB_6:
   \   000166                ; Setup parameters for call to function strStartWith
   \   000166   7C..         MOV     R4,#`?<Constant "ReportNames">` & 0xff
   \   000168   7D..         MOV     R5,#(`?<Constant "ReportNames">` >> 8) & 0xff
   \   00016A   AA..         MOV     R2,?V0 + 4
   \   00016C   AB..         MOV     R3,?V0 + 5
   \   00016E   12....       LCALL   ??Subroutine22_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_54:
   \   000171   6005         JZ      ??processUartCB_7
   1065              
   1066              sendReportNamesMsg();
   \   000173                ; Setup parameters for call to function sendReportNamesMsg
   \   000173   12....       LCALL   ??sendReportNamesMsg?relay
   \   000176   8037         SJMP    ??processUartCB_5
   1067            } else  if (strStartWith(buf, "sendCmd ")) {
   \                     ??processUartCB_7:
   \   000178                ; Setup parameters for call to function strStartWith
   \   000178   7C..         MOV     R4,#`?<Constant "sendCmd ">` & 0xff
   \   00017A   7D..         MOV     R5,#(`?<Constant "sendCmd ">` >> 8) & 0xff
   \   00017C   AA..         MOV     R2,?V0 + 4
   \   00017E   AB..         MOV     R3,?V0 + 5
   \   000180   12....       LCALL   ??Subroutine22_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_55:
   \   000183   600F         JZ      ??processUartCB_8
   1068              sendSendCmdMsg(buf + 8);
   \   000185                ; Setup parameters for call to function sendSendCmdMsg
   \   000185   E5..         MOV     A,?V0 + 4
   \   000187   2408         ADD     A,#0x8
   \   000189   FA           MOV     R2,A
   \   00018A   E5..         MOV     A,?V0 + 5
   \   00018C   3400         ADDC    A,#0x0
   \   00018E   FB           MOV     R3,A
   \   00018F   12....       LCALL   ??sendSendCmdMsg?relay
   \   000192   801B         SJMP    ??processUartCB_5
   1069            } else {
   1070              buf[len-1] = 0;
   \                     ??processUartCB_8:
   \   000194   EE           MOV     A,R6
   \   000195   24FF         ADD     A,#-0x1
   \   000197   F582         MOV     DPL,A
   \   000199   EF           MOV     A,R7
   \   00019A   34FF         ADDC    A,#-0x1
   \   00019C   F583         MOV     DPH,A
   \   00019E   E4           CLR     A
   \   00019F   F0           MOVX    @DPTR,A
   1071              printf("unkown cmd: %s\n", buf); 
   \   0001A0                ; Setup parameters for call to function printf
   \   0001A0   78..         MOV     R0,#?V0 + 4
   \   0001A2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001A5   7A..         MOV     R2,#`?<Constant "unkown cmd: %s\\n">` & 0xff
   \   0001A7   7B..         MOV     R3,#(`?<Constant "unkown cmd: %s\\n">` >> 8) & 0xff
   1072              
   1073            }
   \                     ??processUartCB_1:
   \   0001A9   12....       LCALL   ??Subroutine23_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_63:
   \   0001AC   12....       LCALL   ?DEALLOC_XSTACK8
   \                     ??processUartCB_5:
   \   0001AF   7440         MOV     A,#0x40
   \   0001B1   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001B4   7F0A         MOV     R7,#0xa
   \   0001B6   02....       LJMP    ?BANKED_LEAVE_XDATA
   1074          }
   1075          
   1076          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1077          static void rxCB(uint8 port,uint8 event)
   \                     rxCB:
   1078          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   1079            if ((event & (HAL_UART_RX_FULL | HAL_UART_RX_ABOUT_FULL | HAL_UART_RX_TIMEOUT)) &&
   1080          #if SERIAL_APP_LOOPBACK
   1081                (SerialApp_TxLen < SERIAL_APP_TX_MAX))
   1082          #else
   1083                !SerialApp_TxLen)
   \   000007   7407         MOV     A,#0x7
   \   000009   5E           ANL     A,R6
   \   00000A   6027         JZ      ??rxCB_0
   \   00000C   90....       MOV     DPTR,#SerialApp_TxLen
   \   00000F   E0           MOVX    A,@DPTR
   \   000010   7021         JNZ     ??rxCB_0
   1084          #endif
   1085            {
   1086              SerialApp_TxLen = HalUARTRead(0, RxBuf, SERIAL_APP_TX_MAX);
   \   000012                ; Setup parameters for call to function HalUARTRead
   \   000012   7C50         MOV     R4,#0x50
   \   000014   7D00         MOV     R5,#0x0
   \   000016   7A..         MOV     R2,#RxBuf & 0xff
   \   000018   7B..         MOV     R3,#(RxBuf >> 8) & 0xff
   \   00001A   7900         MOV     R1,#0x0
   \   00001C   12....       LCALL   ??HalUARTRead?relay
   \   00001F   EA           MOV     A,R2
   \   000020   90....       MOV     DPTR,#SerialApp_TxLen
   \   000023   F0           MOVX    @DPTR,A
   1087              if (SerialApp_TxLen)
   \   000024   600D         JZ      ??rxCB_0
   1088              {
   1089                
   1090                processUartCB(RxBuf, SerialApp_TxLen);
   \   000026                ; Setup parameters for call to function processUartCB
   \   000026   F9           MOV     R1,A
   \   000027   7A..         MOV     R2,#RxBuf & 0xff
   \   000029   7B..         MOV     R3,#(RxBuf >> 8) & 0xff
   \   00002B   12....       LCALL   ??processUartCB?relay
   1091                  
   1092                //HalUARTWrite(0, RxBuf, SerialApp_TxLen);
   1093                //GenericApp_SendTheMessage();
   1094                
   1095                SerialApp_TxLen=0;
   \   00002E   90....       MOV     DPTR,#SerialApp_TxLen
   \   000031   E4           CLR     A
   \   000032   F0           MOVX    @DPTR,A
   1096              }
   1097            }
   1098          }
   \                     ??rxCB_0:
   \   000033   7F01         MOV     R7,#0x1
   \   000035   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   A3           INC     DPTR
   \   000001                REQUIRE ??Subroutine26_0
   \   000001                ; // Fall through to label ??Subroutine26_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine26_0:
   \   000000   A3           INC     DPTR
   \   000001                REQUIRE ??Subroutine27_0
   \   000001                ; // Fall through to label ??Subroutine27_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine27_0:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F9           MOV     R1,A
   \   000002   12....       LCALL   ??findHexValue?relay
   \   000005   22           RET

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for n>`:
   \   000000   0100         DW 1

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??resetCurrentTime?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    resetCurrentTime

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SysPowerMode?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SysPowerMode

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_ProcessEvent?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_ProcessEvent

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??setLightMode?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    setLightMode

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??getLightStatus?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    getLightStatus

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??processLightToggle?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    processLightToggle

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??processLightOff?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    processLightOff

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??processLightStatus?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    processLightStatus

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??processLightCmd?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    processLightCmd

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??processReportNames?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    processReportNames

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_ProcessZDOMsgs?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_ProcessZDOMsgs

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??turnOffLightLater?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    turnOffLightLater

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??turnOnLight?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    turnOnLight

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??lightToggle?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    lightToggle

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_HandleKeys?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_HandleKeys

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??strStartWith?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    strStartWith

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??strEqual?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    strEqual

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_MessageMSGCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_MessageMSGCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_SendTheMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_SendTheMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??sendReportNamesMsg?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    sendReportNamesMsg

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??findHexValue?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    findHexValue

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??strToDec?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    strToDec

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??sendSendCmdMsg?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    sendSendCmdMsg

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??getMyName?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    getMyName

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??processUartCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    processUartCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??rxCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    rxCB

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "GenericApp">`:
   \   000000   47656E65     DB "GenericApp"
   \            72696341
   \            707000  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "GenericApp_Init[%s] D...">`:
   \   000000   47656E65     DB "GenericApp_Init[%s] Done!\012"
   \            72696341
   \            70705F49
   \            6E69745B
   \            25735D20
   \            446F6E65
   \            210A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Addr=%04X, ParentAddr...">`:
   \   000000   41646472     DB "Addr=%04X, ParentAddr=%04X\012"
   \            3D253034
   \            582C2050
   \            6172656E
   \            74416464
   \            723D2530
   \            34580A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "current[%d] : %d, Lig...">`:
   \   000000   63757272     DB "current[%d] : %d, LightOffTimeValue[%d]: %d\012"
   \            656E745B
   \            25645D20
   \            3A202564
   \            2C204C69
   \            6768744F
   \            66665469
   \            6D655661
   \            6C75655B
   \            25645D3A
   \            2025640A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "awake[%d]...\\n">`:
   \   000000   6177616B     DB "awake[%d]...\012"
   \            655B2564
   \            5D2E2E2E
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "sleep now\\n">`:
   \   000000   736C6565     DB "sleep now\012"
   \            70206E6F
   \            770A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "invalid lightNumber: %d\\n">`:
   \   000000   696E7661     DB "invalid lightNumber: %d\012"
   \            6C696420
   \            6C696768
   \            744E756D
   \            6265723A
   \            2025640A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Off">`:
   \   000000   4F666600     DB "Off"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "On">`:
   \   000000   4F6E00       DB "On"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "LightToggle">`:
   \   000000   4C696768     DB "LightToggle"
   \            74546F67
   \            676C6500

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "LightOn">`:
   \   000000   4C696768     DB "LightOn"
   \            744F6E00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "LightOff">`:
   \   000000   4C696768     DB "LightOff"
   \            744F6666
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "LightStatus">`:
   \   000000   4C696768     DB "LightStatus"
   \            74537461
   \            74757300

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "LightOffLater">`:
   \   000000   4C696768     DB "LightOffLater"
   \            744F6666
   \            4C617465
   \            7200    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "invalid request: %s\\n">`:
   \   000000   696E7661     DB "invalid request: %s\012"
   \            6C696420
   \            72657175
   \            6573743A
   \            2025730A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "%sResp %d %s %04X %s">`:
   \   000000   25735265     DB "%sResp %d %s %04X %s"
   \            73702025
   \            64202573
   \            20253034
   \            58202573
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "LightOffLater 1 ">`:
   \   000000   4C696768     DB "LightOffLater 1 "
   \            744F6666
   \            4C617465
   \            72203120
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "%sResp %d %04X %s">`:
   \   000000   25735265     DB "%sResp %d %04X %s"
   \            73702025
   \            64202530
   \            34582025
   \            7300    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "send %sResp %d error %s\\n">`:
   \   000000   73656E64     DB "send %sResp %d error %s\012"
   \            20257352
   \            65737020
   \            25642065
   \            72726F72
   \            2025730A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "ReportNamesResp %s %0...">`:
   \   000000   5265706F     DB "ReportNamesResp %s %04X %04X"
   \            72744E61
   \            6D657352
   \            65737020
   \            25732025
   \            30345820
   \            25303458
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "send ReportNamesResp ...">`:
   \   000000   73656E64     DB "send ReportNamesResp error %s\012"
   \            20526570
   \            6F72744E
   \            616D6573
   \            52657370
   \            20657272
   \            6F722025
   \            730A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "%04X LightOffLater %d 60">`:
   \   000000   25303458     DB "%04X LightOffLater %d 60"
   \            204C6967
   \            68744F66
   \            664C6174
   \            65722025
   \            64203630
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "%04X LightOn %d">`:
   \   000000   25303458     DB "%04X LightOn %d"
   \            204C6967
   \            68744F6E
   \            20256400

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "%04X LightToggle %d">`:
   \   000000   25303458     DB "%04X LightToggle %d"
   \            204C6967
   \            6874546F
   \            67676C65
   \            20256400

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "HandleKeys: HAL_KEY_1...">`:
   \   000000   48616E64     DB "HandleKeys: HAL_KEY_1_LOW\012"
   \            6C654B65
   \            79733A20
   \            48414C5F
   \            4B45595F
   \            315F4C4F
   \            570A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "HandleKeys: HAL_KEY_2...">`:
   \   000000   48616E64     DB "HandleKeys: HAL_KEY_2_LOW\012"
   \            6C654B65
   \            79733A20
   \            48414C5F
   \            4B45595F
   \            325F4C4F
   \            570A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "HandleKeys: HAL_KEY_3...">`:
   \   000000   48616E64     DB "HandleKeys: HAL_KEY_3_LOW\012"
   \            6C654B65
   \            79733A20
   \            48414C5F
   \            4B45595F
   \            335F4C4F
   \            570A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "HandleKeys: HAL_KEY_4...">`:
   \   000000   48616E64     DB "HandleKeys: HAL_KEY_4_LOW\012"
   \            6C654B65
   \            79733A20
   \            48414C5F
   \            4B45595F
   \            345F4C4F
   \            570A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "HandleKeys: HAL_KEY_1...">_1`:
   \   000000   48616E64     DB "HandleKeys: HAL_KEY_1_HIGH\012"
   \            6C654B65
   \            79733A20
   \            48414C5F
   \            4B45595F
   \            315F4849
   \            47480A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "HandleKeys: HAL_KEY_2...">_1`:
   \   000000   48616E64     DB "HandleKeys: HAL_KEY_2_HIGH\012"
   \            6C654B65
   \            79733A20
   \            48414C5F
   \            4B45595F
   \            325F4849
   \            47480A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "HandleKeys: HAL_KEY_3...">_1`:
   \   000000   48616E64     DB "HandleKeys: HAL_KEY_3_HIGH\012"
   \            6C654B65
   \            79733A20
   \            48414C5F
   \            4B45595F
   \            335F4849
   \            47480A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "HandleKeys: HAL_KEY_4...">_1`:
   \   000000   48616E64     DB "HandleKeys: HAL_KEY_4_HIGH\012"
   \            6C654B65
   \            79733A20
   \            48414C5F
   \            4B45595F
   \            345F4849
   \            47480A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "DoorSensor">`:
   \   000000   446F6F72     DB "DoorSensor"
   \            53656E73
   \            6F7200  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "RestroomSensor">`:
   \   000000   52657374     DB "RestroomSensor"
   \            726F6F6D
   \            53656E73
   \            6F7200  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "MainLight">`:
   \   000000   4D61696E     DB "MainLight"
   \            4C696768
   \            7400    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "BedLight">`:
   \   000000   4265644C     DB "BedLight"
   \            69676874
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "process Cmd: %s\\n">`:
   \   000000   70726F63     DB "process Cmd: %s\012"
   \            65737320
   \            436D643A
   \            2025730A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "ReportNamesResp">`:
   \   000000   5265706F     DB "ReportNamesResp"
   \            72744E61
   \            6D657352
   \            65737000

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "ReportNames">`:
   \   000000   5265706F     DB "ReportNames"
   \            72744E61
   \            6D657300

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "LightStatusResp">`:
   \   000000   4C696768     DB "LightStatusResp"
   \            74537461
   \            74757352
   \            65737000

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "LightOnResp">`:
   \   000000   4C696768     DB "LightOnResp"
   \            744F6E52
   \            65737000

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "LightOffLaterResp">`:
   \   000000   4C696768     DB "LightOffLaterResp"
   \            744F6666
   \            4C617465
   \            72526573
   \            7000    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "LightToggleResp">`:
   \   000000   4C696768     DB "LightToggleResp"
   \            74546F67
   \            676C6552
   \            65737000

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "LightOffResp">`:
   \   000000   4C696768     DB "LightOffResp"
   \            744F6666
   \            52657370
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "ReportNames">_1`:
   \   000000   5265706F     DB "ReportNames"
   \            72744E61
   \            6D657300

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "send ReportNames error\\n">`:
   \   000000   73656E64     DB "send ReportNames error\012"
   \            20526570
   \            6F72744E
   \            616D6573
   \            20657272
   \            6F720A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "sendCmd: addr=%04X, c...">`:
   \   000000   73656E64     DB "sendCmd: addr=%04X, cmd=%s\012"
   \            436D643A
   \            20616464
   \            723D2530
   \            34582C20
   \            636D643D
   \            25730A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "invalid buf length: %d\\n">`:
   \   000000   696E7661     DB "invalid buf length: %d\012"
   \            6C696420
   \            62756620
   \            6C656E67
   \            74683A20
   \            25640A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "RNV Name">`:
   \   000000   524E5620     DB "RNV Name"
   \            4E616D65
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "invalid nv item len: %d\\n">`:
   \   000000   696E7661     DB "invalid nv item len: %d\012"
   \            6C696420
   \            6E762069
   \            74656D20
   \            6C656E3A
   \            2025640A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Name = %s\\n">`:
   \   000000   4E616D65     DB "Name = %s\012"
   \            203D2025
   \            730A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "WNV Name ">`:
   \   000000   574E5620     DB "WNV Name "
   \            4E616D65
   \            2000    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "receive cmd: %s\\n">`:
   \   000000   72656365     DB "receive cmd: %s\012"
   \            69766520
   \            636D643A
   \            2025730A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "sendCmd ">`:
   \   000000   73656E64     DB "sendCmd "
   \            436D6420
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "unkown cmd: %s\\n">`:
   \   000000   756E6B6F     DB "unkown cmd: %s\012"
   \            776E2063
   \            6D643A20
   \            25730A00
   1099          /*********************************************************************
   1100          *********************************************************************/

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     GenericApp_HandleKeys              0      0     27
       -> printf                        0      0     24
       -> printf                        0      0     24
       -> printf                        0      0     24
       -> printf                        0      0     24
       -> printf                        0      0     24
       -> printf                        0      0     24
       -> printf                        0      0     24
       -> printf                        0      0     24
       -> getMyName                     0      0     24
       -> strEqual                      0      0     24
       -> turnOffLightLater             0      0     24
       -> turnOnLight                   0      0     24
       -> strEqual                      0      0     24
       -> turnOnLight                   0      0     24
       -> turnOffLightLater             0      0     24
       -> strEqual                      0      0     24
       -> lightToggle                   0      0     24
       -> lightToggle                   0      0     24
       -> lightToggle                   0      0     24
       -> strEqual                      0      0     24
       -> SysPowerMode                  0      0     24
     GenericApp_Init                    0      0     41
       -> afRegister                    0      0     78
       -> RegisterForKeys               0      0     78
       -> HalUARTOpen                   0      0     78
       -> HalLcdWriteString             0      0     78
       -> HalLedSet                     0      0     78
       -> getMyName                     0      0     78
       -> printf                        0      0     82
     GenericApp_MessageMSGCB            0      0     27
       -> printf                        0      0     24
       -> strStartWith                  0      0     20
       -> strStartWith                  0      0     20
       -> processReportNames            0      0     20
       -> strStartWith                  0      0     20
       -> strStartWith                  0      0     20
       -> processLightStatus            0      0     20
       -> strStartWith                  0      0     20
       -> strStartWith                  0      0     20
       -> processLightCmd               0      0     20
       -> strStartWith                  0      0     20
       -> strStartWith                  0      0     20
       -> processLightCmd               0      0     20
       -> strStartWith                  0      0     20
       -> strStartWith                  0      0     20
       -> processLightToggle            0      0     20
       -> strStartWith                  0      0     20
       -> strStartWith                  0      0     20
       -> processLightOff               0      0     20
     GenericApp_ProcessEvent            0      0     23
       -> osal_msg_receive              0      0     30
       -> HalLedSet                     0      0     30
       -> NLME_GetShortAddr             0      0     30
       -> NLME_GetCoordShortAddr        0      0     30
       -> printf                        0      0     38
       -> osal_start_timerEx            0      0     30
       -> osal_start_timerEx            0      0     30
       -> osal_msg_deallocate           0      0     30
       -> osal_msg_receive              0      0     30
       -> GenericApp_ProcessZDOMsgs     0      0     30
       -> GenericApp_HandleKeys         0      0     30
       -> GenericApp_MessageMSGCB       0      0     30
       -> GenericApp_SendTheMessage     0      0     30
       -> osal_start_timerEx            0      0     30
       -> printf                        0      0     46
       -> setLightMode                  0      0     30
       -> resetCurrentTime              0      0     30
       -> osal_start_timerEx            0      0     30
       -> printf                        0      0     34
       -> printf                        0      0     30
       -> SysPowerMode                  0      0     30
       -> osal_start_timerEx            0      0     30
     GenericApp_ProcessZDOMsgs          0      0     25
       -> ZDO_ParseEPListRsp            0      0     20
       -> osal_mem_free                 0      0     20
     GenericApp_SendTheMessage          0      0     46
       -> AF_DataRequest                0      0     62
     SysPowerMode                       0      0     15
     findHexValue                       2      0     28
     getLightStatus                     0      0     97
       -> HalLedGetState                0      0     22
       -> printf                        0      0     26
     getMyName                          0      0     94
       -> osal_nv_read                  0      0     28
     lightToggle                        0      0     74
       -> sprintf                       0      0    124
       -> sendSendCmdMsg                0      0    116
     processLightCmd                    0      0    100
       -> osal_strlen                   0      0    160
       -> osal_strlen                   0      0    160
       -> printf                        0      0    164
       -> osal_strlen                   0      0    160
       -> NLME_GetShortAddr             0      0    160
       -> strEqual                      0      0    160
       -> getMyName                     0      0    160
       -> getLightStatus                0      0    168
       -> sprintf                       0      0    180
       -> strEqual                      0      0    160
       -> osal_strlen                   0      0    160
       -> strToDec                      0      0    160
       -> resetCurrentTime              0      0    160
       -> getMyName                     0      0    160
       -> sprintf                       0      0    176
       -> setLightMode                  0      0    160
       -> resetCurrentTime              0      0    160
       -> getMyName                     0      0    160
       -> sprintf                       0      0    176
       -> osal_strlen                   0      0    170
       -> AF_DataRequest                0      0    178
       -> printf                        0      0    172
     processLightOff                    2      0     10
       -> processLightCmd               4      0      0
     processLightStatus                 2      0     10
       -> processLightCmd               4      0      0
     processLightToggle                 2      0     10
       -> processLightCmd               4      0      0
     processReportNames                 0      0     93
       -> NLME_GetShortAddr             0      0    148
       -> NLME_GetCoordShortAddr        0      0    148
       -> getMyName                     0      0    156
       -> sprintf                       0      0    160
       -> osal_strlen                   0      0    158
       -> AF_DataRequest                0      0    166
       -> printf                        0      0    152
     processUartCB                      0      0     95
       -> printf                        0      0    168
       -> strStartWith                  0      0    164
       -> osal_nv_item_len              0      0    164
       -> printf                        0      0    168
       -> osal_nv_read                  0      0    172
       -> printf                        0      0    168
       -> strStartWith                  0      0    164
       -> osal_memcpy                   0      0    170
       -> osal_nv_item_init             0      0    168
       -> osal_nv_write                 0      0    172
       -> printf                        0      0    168
       -> strStartWith                  0      0    164
       -> sendReportNamesMsg            0      0    164
       -> strStartWith                  0      0    164
       -> sendSendCmdMsg                0      0    164
       -> printf                        0      0    168
     resetCurrentTime                   2      0     80
     rxCB                               0      0      9
       -> HalUARTRead                   0      0     18
       -> processUartCB                 0      0     18
     sendReportNamesMsg                 2      0    125
       -> osal_strlen                   0      0     78
       -> AF_DataRequest                0      0     86
       -> printf                        0      0     68
     sendSendCmdMsg                     0      0    119
       -> findHexValue                  0      0     56
       -> findHexValue                  0      0     56
       -> findHexValue                  0      0     56
       -> findHexValue                  0      0     56
       -> printf                        0      0     64
       -> osal_strlen                   0      0     66
       -> AF_DataRequest                0      0     74
       -> printf                        0      0     56
     setLightMode                       0      0     92
       -> HalLedSet                     0      0     20
       -> printf                        0      0     24
     strEqual                           2      0     80
     strStartWith                       2      0     82
     strToDec                           0      0     90
     turnOffLightLater                  0      0     74
       -> sprintf                       0      0    124
       -> sendSendCmdMsg                0      0    116
     turnOnLight                        0      0     74
       -> sprintf                       0      0    124
       -> sendSendCmdMsg                0      0    116


   Segment part sizes:

     Function/Label                           Bytes
     --------------                           -----
     PCON                                        1
     P0IFG                                       1
     PICTL                                       1
     P0INP                                       1
     _A_IEN0                                     1
     P0IEN                                       1
     _A_IEN1                                     1
     SLEEPCMD                                    1
     lightOffTimeValue                           8
     currentTime                                 8
     GenericApp_ClusterList                      2
     GenericApp_SimpleDesc                      12
     GenericApp_epDesc                           6
     GenericApp_TaskID                           1
     GenericApp_NwkState                         1
     GenericApp_TransID                          1
     GenericApp_DstAddr                         12
     RxBuf                                      81
     SerialApp_TxLen                             1
     GenericApp_Init                           276
     ?Subroutine5                               11
     ?Subroutine9                               11
     ?Subroutine11                              10
     ??Subroutine23_0                            6
     ?Subroutine17                               8
     ??Subroutine24_0                            3
     ??Subroutine25_0                            5
     resetCurrentTime                           41
     ??Subroutine19_0                            7
     SysPowerMode                               20
     GenericApp_ProcessEvent                   468
     ?Subroutine8                                5
     ?Subroutine18                              11
     ?Subroutine13                              11
     n                                           2
     setLightMode                               58
     ?Subroutine10                               4
     getLightStatus                             76
     ?Subroutine1                                3
     processLightToggle                         13
     processLightOff                            13
     processLightStatus                         13
     processLightCmd                           495
     ?Subroutine12                              10
     ?Subroutine2                               30
     ??Subroutine21_0                            5
     ?Subroutine16                              10
     processReportNames                        194
     ?Subroutine4                                4
     ??Subroutine20_0                           16
     GenericApp_ProcessZDOMsgs                  89
     turnOffLightLater                          38
     ?Subroutine0                               32
     turnOnLight                                38
     lightToggle                                38
     GenericApp_HandleKeys                     278
     ?Subroutine14                               4
     strStartWith                               45
     strEqual                                   63
     GenericApp_MessageMSGCB                   232
     ?Subroutine15                               4
     ??Subroutine22_0                            5
     ?Subroutine6                               14
     GenericApp_SendTheMessage                  94
     ?Subroutine3                               11
     sendReportNamesMsg                        134
     findHexValue                               60
     strToDec                                   68
     sendSendCmdMsg                            250
     myName                                     64
     getMyName                                  58
     processUartCB                             441
     rxCB                                       56
     ?Subroutine7                                1
     ??Subroutine26_0                            1
     ??Subroutine27_0                            6
     ?<Initializer for n>                        2
     ??GenericApp_Init?relay                     6
     ??resetCurrentTime?relay                    6
     ??SysPowerMode?relay                        6
     ??GenericApp_ProcessEvent?relay             6
     ??setLightMode?relay                        6
     ??getLightStatus?relay                      6
     ??processLightToggle?relay                  6
     ??processLightOff?relay                     6
     ??processLightStatus?relay                  6
     ??processLightCmd?relay                     6
     ??processReportNames?relay                  6
     ??GenericApp_ProcessZDOMsgs?relay           6
     ??turnOffLightLater?relay                   6
     ??turnOnLight?relay                         6
     ??lightToggle?relay                         6
     ??GenericApp_HandleKeys?relay               6
     ??strStartWith?relay                        6
     ??strEqual?relay                            6
     ??GenericApp_MessageMSGCB?relay             6
     ??GenericApp_SendTheMessage?relay           6
     ??sendReportNamesMsg?relay                  6
     ??findHexValue?relay                        6
     ??strToDec?relay                            6
     ??sendSendCmdMsg?relay                      6
     ??getMyName?relay                           6
     ??processUartCB?relay                       6
     ??rxCB?relay                                6
     ?<Constant "GenericApp">                   11
     ?<Constant "GenericApp_Init[%s] D...">     27
     ?<Constant "Addr=%04X, ParentAddr...">     28
     ?<Constant "current[%d] : %d, Lig...">     45
     ?<Constant "awake[%d]...\n">               14
     ?<Constant "sleep now\n">                  11
     ?<Constant "invalid lightNumber: %d\n">    25
     ?<Constant "Off">                           4
     ?<Constant "On">                            3
     ?<Constant "LightToggle">                  12
     ?<Constant "LightOn">                       8
     ?<Constant "LightOff">                      9
     ?<Constant "LightStatus">                  12
     ?<Constant "LightOffLater">                14
     ?<Constant "invalid request: %s\n">        21
     ?<Constant "%sResp %d %s %04X %s">         21
     ?<Constant "LightOffLater 1 ">             17
     ?<Constant "%sResp %d %04X %s">            18
     ?<Constant "send %sResp %d error %s\n">    25
     ?<Constant "ReportNamesResp %s %0...">     29
     ?<Constant "send ReportNamesResp ...">     31
     ?<Constant "%04X LightOffLater %d 60">     25
     ?<Constant "%04X LightOn %d">              16
     ?<Constant "%04X LightToggle %d">          20
     ?<Constant "HandleKeys: HAL_KEY_1...">     27
     ?<Constant "HandleKeys: HAL_KEY_2...">     27
     ?<Constant "HandleKeys: HAL_KEY_3...">     27
     ?<Constant "HandleKeys: HAL_KEY_4...">     27
     ?<Constant "HandleKeys: HAL_KEY_1...">_1   28
     ?<Constant "HandleKeys: HAL_KEY_2...">_1   28
     ?<Constant "HandleKeys: HAL_KEY_3...">_1   28
     ?<Constant "HandleKeys: HAL_KEY_4...">_1   28
     ?<Constant "DoorSensor">                   11
     ?<Constant "RestroomSensor">               15
     ?<Constant "MainLight">                    10
     ?<Constant "BedLight">                      9
     ?<Constant "process Cmd: %s\n">            17
     ?<Constant "ReportNamesResp">              16
     ?<Constant "ReportNames">                  12
     ?<Constant "LightStatusResp">              16
     ?<Constant "LightOnResp">                  12
     ?<Constant "LightOffLaterResp">            18
     ?<Constant "LightToggleResp">              16
     ?<Constant "LightOffResp">                 13
     ?<Constant "ReportNames">_1                12
     ?<Constant "send ReportNames error\n">     24
     ?<Constant "sendCmd: addr=%04X, c...">     28
     ?<Constant "invalid buf length: %d\n">     24
     ?<Constant "RNV Name">                      9
     ?<Constant "invalid nv item len: %d\n">    25
     ?<Constant "Name = %s\n">                  11
     ?<Constant "WNV Name ">                    10
     ?<Constant "receive cmd: %s\n">            17
     ?<Constant "sendCmd ">                      9
     ?<Constant "unkown cmd: %s\n">             16

 
 3 897 bytes in segment BANKED_CODE
   162 bytes in segment BANK_RELAYS
     8 bytes in segment SFR_AN
     2 bytes in segment XDATA_I
     2 bytes in segment XDATA_ID
 1 030 bytes in segment XDATA_ROM_C
   183 bytes in segment XDATA_Z
 
 4 061 bytes of CODE  memory
 1 030 bytes of CONST memory
     0 bytes of DATA  memory (+ 8 bytes shared)
   185 bytes of XDATA memory

Errors: none
Warnings: 1
